"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_components_EpubViewerWithQuiz_js"],{

/***/ "(app-pages-browser)/./components/EpubViewerWithQuiz.js":
/*!******************************************!*\
  !*** ./components/EpubViewerWithQuiz.js ***!
  \******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ EpubViewerWithQuiz)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\nfunction EpubViewerWithQuiz() {\n    var _manifest_pages;\n    _s();\n    const spreadContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const leftViewerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const rightViewerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const leftBookRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const rightBookRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const leftRenditionRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const rightRenditionRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const leftCurrentIndexRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const rightCurrentIndexRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [manifest, setManifest] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [currentPage, setCurrentPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [dualMode, setDualMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [showQuiz, setShowQuiz] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [quizLoading, setQuizLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [questions, setQuestions] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [userAnswers, setUserAnswers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [quizSubmitted, setQuizSubmitted] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const manifestRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"EpubViewerWithQuiz.useEffect\": ()=>{\n            manifestRef.current = manifest;\n        }\n    }[\"EpubViewerWithQuiz.useEffect\"], [\n        manifest\n    ]);\n    const loadPageRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)({\n        \"EpubViewerWithQuiz.useRef[loadPageRef]\": ()=>{}\n    }[\"EpubViewerWithQuiz.useRef[loadPageRef]\"]);\n    loadPageRef.current = (idx)=>loadPage(idx);\n    var _manifest_pages_length;\n    const totalPages = (_manifest_pages_length = manifest === null || manifest === void 0 ? void 0 : (_manifest_pages = manifest.pages) === null || _manifest_pages === void 0 ? void 0 : _manifest_pages.length) !== null && _manifest_pages_length !== void 0 ? _manifest_pages_length : 0;\n    const isLastPage = totalPages > 0 && currentPage >= totalPages - 1;\n    // 마운트 시 로그\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"EpubViewerWithQuiz.useEffect\": ()=>{\n            console.log(\"[EpubViewer] 컴포넌트 마운트됨\");\n            return ({\n                \"EpubViewerWithQuiz.useEffect\": ()=>console.log(\"[EpubViewer] 컴포넌트 언마운트됨\")\n            })[\"EpubViewerWithQuiz.useEffect\"];\n        }\n    }[\"EpubViewerWithQuiz.useEffect\"], []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"EpubViewerWithQuiz.useEffect\": ()=>{\n            if (false) {}\n            const opfUrl = \"https://files-kids-english.s3.ap-northeast-2.amazonaws.com/books/urn%3Auuid%3Apublishing-3e1d27df/epub/OEBPS/content.opf\";\n            const manifestUrl = \"https://files-kids-english.s3.ap-northeast-2.amazonaws.com/books/urn%3Auuid%3Apublishing-3e1d27df/manifest.json\";\n            const init = {\n                \"EpubViewerWithQuiz.useEffect.init\": async ()=>{\n                    var _manifestRes_pages;\n                    const [manifestRes, ePubModule] = await Promise.all([\n                        fetch(manifestUrl).then({\n                            \"EpubViewerWithQuiz.useEffect.init\": (r)=>r.json()\n                        }[\"EpubViewerWithQuiz.useEffect.init\"]),\n                        __webpack_require__.e(/*! import() */ \"_app-pages-browser_node_modules_epubjs_src_index_js\").then(__webpack_require__.bind(__webpack_require__, /*! epubjs */ \"(app-pages-browser)/./node_modules/epubjs/src/index.js\")).then({\n                            \"EpubViewerWithQuiz.useEffect.init\": (m)=>m.default\n                        }[\"EpubViewerWithQuiz.useEffect.init\"])\n                    ]);\n                    console.log(\"[EpubViewer] manifest 로드됨, pages:\", manifestRes === null || manifestRes === void 0 ? void 0 : (_manifestRes_pages = manifestRes.pages) === null || _manifestRes_pages === void 0 ? void 0 : _manifestRes_pages.length);\n                    setManifest(manifestRes);\n                    const ePub = ePubModule;\n                    const leftBook = ePub(opfUrl);\n                    const rightBook = ePub(opfUrl);\n                    leftBookRef.current = leftBook;\n                    rightBookRef.current = rightBook;\n                    await Promise.all([\n                        leftBook.ready,\n                        rightBook.ready\n                    ]);\n                    setTimeout({\n                        \"EpubViewerWithQuiz.useEffect.init\": ()=>loadPageRef.current(0)\n                    }[\"EpubViewerWithQuiz.useEffect.init\"], 0);\n                }\n            }[\"EpubViewerWithQuiz.useEffect.init\"];\n            init();\n        }\n    }[\"EpubViewerWithQuiz.useEffect\"], []);\n    // 책 로드 후 즉시 문제 생성 시작\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"EpubViewerWithQuiz.useEffect\": ()=>{\n            var _manifest_pages;\n            if (!(manifest === null || manifest === void 0 ? void 0 : (_manifest_pages = manifest.pages) === null || _manifest_pages === void 0 ? void 0 : _manifest_pages.length)) return;\n            const bookText = manifest.pages.map({\n                \"EpubViewerWithQuiz.useEffect.bookText\": (p)=>typeof (p === null || p === void 0 ? void 0 : p.text) === \"string\" ? p.text.trim() : \"\"\n            }[\"EpubViewerWithQuiz.useEffect.bookText\"]).filter(Boolean).join(\"\\n\\n\").trim();\n            if (!bookText) {\n                console.warn(\"[EpubViewer] manifest에 텍스트 없음\");\n                setQuizLoading(false);\n                return;\n            }\n            console.log(\"[EpubViewer] 책 로드 완료, 문제 생성 시작, text 길이:\", bookText.length);\n            fetch(\"/api/generate-questions\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    bookText\n                })\n            }).then({\n                \"EpubViewerWithQuiz.useEffect\": (res)=>res.json()\n            }[\"EpubViewerWithQuiz.useEffect\"]).then({\n                \"EpubViewerWithQuiz.useEffect\": (data)=>{\n                    var _data_questions;\n                    if ((_data_questions = data.questions) === null || _data_questions === void 0 ? void 0 : _data_questions.length) {\n                        setQuestions(data.questions);\n                        setQuizLoading(false);\n                        console.log(\"[EpubViewer] 문제 생성 완료:\", data.questions.length, \"개\");\n                    } else {\n                        var _data_error;\n                        console.error(\"[EpubViewer] 문제 생성 실패:\", (_data_error = data.error) !== null && _data_error !== void 0 ? _data_error : data);\n                        setQuizLoading(false);\n                    }\n                }\n            }[\"EpubViewerWithQuiz.useEffect\"]).catch({\n                \"EpubViewerWithQuiz.useEffect\": (err)=>{\n                    console.error(\"[EpubViewer] 문제 생성 오류:\", err);\n                    setQuizLoading(false);\n                }\n            }[\"EpubViewerWithQuiz.useEffect\"]);\n        }\n    }[\"EpubViewerWithQuiz.useEffect\"], [\n        manifest\n    ]);\n    const injectReset = (iframe, side)=>{\n        try {\n            if (!iframe) return;\n            iframe.style.width = \"100%\";\n            iframe.style.height = \"100%\";\n            iframe.style.border = \"0\";\n            iframe.style.display = \"block\";\n            const doc = iframe.contentDocument || iframe.contentWindow.document;\n            const style = doc.createElement(\"style\");\n            const justify = side === \"left\" ? \"flex-end\" : \"flex-start\";\n            style.textContent = \"\\n        @page{margin:0 !important;}\\n        html,body,:root{margin:0 !important;padding:0 !important;height:100% !important;min-width:0 !important;background:transparent !important}\\n        *{box-sizing:border-box !important;margin:0 !important;padding:0 !important;border:0 !important;border-radius:0 !important;pointer-events:auto !important}\\n        body{display:flex !important;align-items:center !important;justify-content:\".concat(justify, \" !important;-webkit-column-count:initial !important;column-count:initial !important;-webkit-column-gap:0 !important;column-gap:0 !important;overflow:hidden !important}\\n        body > *{margin:0 !important;padding:0 !important;border:0 !important;border-radius:0 !important}\\n        p,figure,section,article,div{margin:0 !important;padding:0 !important;border:0 !important;border-radius:0 !important}\\n        img,svg,canvas,video{max-width:100% !important;height:auto !important;display:block !important;margin:0 !important;padding:0 !important;border:0 !important;border-radius:0 !important}\\n        figure,.page,section,article,div{margin:0 !important;padding:0 !important;border:0 !important;border-radius:0 !important;min-width:0 !important}\\n        .page-text,.textLayer,.layer-text{display:none !important}\\n        a{pointer-events:auto !important}\\n      \");\n            doc.head.appendChild(style);\n            if (!doc.querySelector('meta[name=\"viewport\"]')) {\n                const meta = doc.createElement(\"meta\");\n                meta.name = \"viewport\";\n                meta.content = \"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\";\n                doc.head.appendChild(meta);\n            }\n            try {\n                var _doc_documentElement, _doc_body;\n                if ((_doc_documentElement = doc.documentElement) === null || _doc_documentElement === void 0 ? void 0 : _doc_documentElement.style) {\n                    doc.documentElement.style.setProperty(\"margin\", \"0\", \"important\");\n                    doc.documentElement.style.setProperty(\"padding\", \"0\", \"important\");\n                }\n                if ((_doc_body = doc.body) === null || _doc_body === void 0 ? void 0 : _doc_body.style) {\n                    doc.body.style.setProperty(\"margin\", \"0\", \"important\");\n                    doc.body.style.setProperty(\"padding\", \"0\", \"important\");\n                    doc.body.style.setProperty(\"display\", \"flex\", \"important\");\n                    doc.body.style.setProperty(\"align-items\", \"center\", \"important\");\n                    doc.body.style.setProperty(\"justify-content\", justify, \"important\");\n                }\n                if (doc.body) {\n                    Array.from(doc.body.children).forEach((el)=>{\n                        if (el === null || el === void 0 ? void 0 : el.style) {\n                            el.style.setProperty(\"margin\", \"0\", \"important\");\n                            el.style.setProperty(\"padding\", \"0\", \"important\");\n                            el.style.setProperty(\"border\", \"0\", \"important\");\n                            el.style.setProperty(\"border-radius\", \"0\", \"important\");\n                        }\n                    });\n                }\n            } catch (e) {}\n            doc.querySelectorAll(\".page-text, .textLayer, .layer-text\").forEach((el)=>{\n                el.style.display = \"none\";\n            });\n        } catch (e) {}\n    };\n    const ensureClickCatcher = (container, side, indexProvider)=>{\n        try {\n            if (!container) return;\n            container.style.position = container.style.position || \"relative\";\n            const id = side === \"left\" ? \"click-catcher-left\" : \"click-catcher-right\";\n            let catcher = container.querySelector(\"#\".concat(id));\n            if (!catcher) {\n                catcher = document.createElement(\"div\");\n                catcher.id = id;\n                catcher.style.cssText = \"position:absolute;top:0;right:0;bottom:0;left:0;z-index:9999;background:transparent;pointer-events:auto;cursor:pointer\";\n                container.appendChild(catcher);\n            }\n            catcher.onclick = ()=>{\n                const idx = indexProvider();\n                if (Number.isFinite(idx)) playCurrentPageAudio(idx);\n            };\n        } catch (e) {}\n    };\n    const attachClickHandlersToDoc = (doc, getIndex)=>{\n        try {\n            doc.addEventListener(\"click\", ()=>{\n                const idx = getIndex();\n                if (Number.isFinite(idx)) playCurrentPageAudio(idx);\n            }, true);\n        } catch (e) {}\n        try {\n            if (doc.body) {\n                doc.body.onclick = ()=>{\n                    const idx = getIndex();\n                    if (Number.isFinite(idx)) playCurrentPageAudio(idx);\n                };\n            }\n        } catch (e) {}\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)({\n        \"EpubViewerWithQuiz.useEffect\": ()=>{\n            const container = spreadContainerRef.current;\n            if (!container) return;\n            const handleResize = {\n                \"EpubViewerWithQuiz.useEffect.handleResize\": ()=>{\n                    const width = container.clientWidth || window.innerWidth;\n                    const height = container.clientHeight || window.innerHeight - 150;\n                    const nextDual = width >= 900;\n                    setDualMode(nextDual);\n                    const panelWidth = nextDual ? Math.floor(width / 2) : width;\n                    try {\n                        var _leftRenditionRef_current;\n                        (_leftRenditionRef_current = leftRenditionRef.current) === null || _leftRenditionRef_current === void 0 ? void 0 : _leftRenditionRef_current.resize(panelWidth, height);\n                    } catch (e) {}\n                    try {\n                        var _rightRenditionRef_current;\n                        (_rightRenditionRef_current = rightRenditionRef.current) === null || _rightRenditionRef_current === void 0 ? void 0 : _rightRenditionRef_current.resize(panelWidth, height);\n                    } catch (e) {}\n                }\n            }[\"EpubViewerWithQuiz.useEffect.handleResize\"];\n            const ro = new ResizeObserver({\n                \"EpubViewerWithQuiz.useEffect\": ()=>handleResize()\n            }[\"EpubViewerWithQuiz.useEffect\"]);\n            ro.observe(container);\n            window.addEventListener(\"resize\", handleResize);\n            setTimeout(handleResize, 0);\n            return ({\n                \"EpubViewerWithQuiz.useEffect\": ()=>{\n                    ro.disconnect();\n                    window.removeEventListener(\"resize\", handleResize);\n                }\n            })[\"EpubViewerWithQuiz.useEffect\"];\n        }\n    }[\"EpubViewerWithQuiz.useEffect\"], []);\n    const stopCurrentAudio = ()=>{\n        try {\n            if (audioRef.current) {\n                audioRef.current.pause();\n                audioRef.current.currentTime = 0;\n            }\n        } catch (e) {}\n    };\n    const loadPage = (index)=>{\n        var _items_leftIndex, _items_;\n        stopCurrentAudio();\n        if (!leftBookRef.current || !rightBookRef.current) return;\n        const spine = leftBookRef.current.spine;\n        var _spine_items, _ref;\n        const items = (_ref = (_spine_items = spine === null || spine === void 0 ? void 0 : spine.items) !== null && _spine_items !== void 0 ? _spine_items : spine === null || spine === void 0 ? void 0 : spine.spineItems) !== null && _ref !== void 0 ? _ref : [];\n        const spineLen = Array.isArray(items) ? items.length : 0;\n        if (!spineLen) return;\n        if (dualMode && index === 0) {\n            var _items_1;\n            const rightHrefOnly = (_items_1 = items[0]) === null || _items_1 === void 0 ? void 0 : _items_1.href;\n            const options = {\n                width: \"100%\",\n                height: \"100%\",\n                flow: \"paginated\",\n                spread: \"none\",\n                allowScriptedContent: true,\n                minSpreadWidth: 0\n            };\n            try {\n                var _leftRenditionRef_current;\n                if (leftViewerRef.current) leftViewerRef.current.innerHTML = \"\";\n                if ((_leftRenditionRef_current = leftRenditionRef.current) === null || _leftRenditionRef_current === void 0 ? void 0 : _leftRenditionRef_current.destroy) {\n                    leftRenditionRef.current.destroy();\n                    leftRenditionRef.current = null;\n                }\n            } catch (e) {}\n            if (rightViewerRef.current && !rightRenditionRef.current) {\n                rightRenditionRef.current = rightBookRef.current.renderTo(rightViewerRef.current, options);\n                rightRenditionRef.current.on(\"rendered\", ()=>{\n                    var _rightViewerRef_current;\n                    const iframe = (_rightViewerRef_current = rightViewerRef.current) === null || _rightViewerRef_current === void 0 ? void 0 : _rightViewerRef_current.querySelector(\"iframe\");\n                    injectReset(iframe, \"right\");\n                });\n            }\n            if (rightHrefOnly && rightRenditionRef.current) {\n                rightRenditionRef.current.display(rightHrefOnly).catch(()=>{});\n            }\n            if (rightViewerRef.current) ensureClickCatcher(rightViewerRef.current, \"right\", ()=>0);\n            leftCurrentIndexRef.current = null;\n            rightCurrentIndexRef.current = 0;\n            setCurrentPage(0);\n            return;\n        }\n        let leftIndex;\n        if (dualMode) {\n            leftIndex = index <= 0 ? 1 : index % 2 === 1 ? index : index + 1;\n            if (leftIndex >= spineLen) leftIndex = Math.max(spineLen - 2, 0);\n            if (leftIndex < 1 && spineLen > 1) leftIndex = 1;\n        } else {\n            leftIndex = Math.max(0, Math.min(index, spineLen - 1));\n        }\n        const leftHref = (_items_leftIndex = items[leftIndex]) === null || _items_leftIndex === void 0 ? void 0 : _items_leftIndex.href;\n        let rightHref = dualMode && leftIndex + 1 < spineLen ? (_items_ = items[leftIndex + 1]) === null || _items_ === void 0 ? void 0 : _items_.href : undefined;\n        if (dualMode && leftIndex === spineLen - 1) {\n            rightHref = undefined;\n            try {\n                var _rightRenditionRef_current;\n                if (rightViewerRef.current) rightViewerRef.current.innerHTML = \"\";\n                if ((_rightRenditionRef_current = rightRenditionRef.current) === null || _rightRenditionRef_current === void 0 ? void 0 : _rightRenditionRef_current.destroy) {\n                    rightRenditionRef.current.destroy();\n                    rightRenditionRef.current = null;\n                }\n            } catch (e) {}\n        }\n        leftCurrentIndexRef.current = leftIndex;\n        rightCurrentIndexRef.current = rightHref ? leftIndex + 1 : null;\n        const options = {\n            width: \"100%\",\n            height: \"100%\",\n            flow: \"paginated\",\n            spread: \"none\",\n            allowScriptedContent: true,\n            minSpreadWidth: 0\n        };\n        if (!leftRenditionRef.current && leftViewerRef.current) {\n            leftRenditionRef.current = leftBookRef.current.renderTo(leftViewerRef.current, options);\n            leftRenditionRef.current.themes.register(\"override\", {\n                \"@page\": {\n                    margin: \"0 !important\"\n                },\n                \"html, body\": {\n                    margin: \"0 !important\",\n                    padding: \"0 !important\",\n                    height: \"100% !important\",\n                    minWidth: \"0 !important\"\n                },\n                \"*\": {\n                    boxSizing: \"border-box !important\"\n                },\n                \"img, svg, canvas, video\": {\n                    width: \"100% !important\",\n                    height: \"100% !important\",\n                    maxWidth: \"100% !important\",\n                    maxHeight: \"100% !important\",\n                    objectFit: \"contain !important\",\n                    display: \"block !important\",\n                    margin: \"0 !important\",\n                    padding: \"0 !important\",\n                    border: \"0 !important\",\n                    borderRadius: \"0 !important\"\n                },\n                \"figure, .page, section, article, div\": {\n                    margin: \"0 !important\",\n                    padding: \"0 !important\",\n                    border: \"0 !important\",\n                    borderRadius: \"0 !important\",\n                    minWidth: \"0 !important\"\n                },\n                \".page-text, .textLayer, .layer-text\": {\n                    display: \"none !important\"\n                },\n                body: {\n                    overflow: \"hidden !important\",\n                    WebkitColumnCount: \"initial !important\",\n                    columnCount: \"initial !important\",\n                    WebkitColumnGap: \"0 !important\",\n                    columnGap: \"0 !important\"\n                }\n            });\n            leftRenditionRef.current.themes.select(\"override\");\n            leftRenditionRef.current.on(\"rendered\", (section)=>{\n                var _leftViewerRef_current, _iframe_contentWindow;\n                const iframe = (_leftViewerRef_current = leftViewerRef.current) === null || _leftViewerRef_current === void 0 ? void 0 : _leftViewerRef_current.querySelector(\"iframe\");\n                injectReset(iframe, \"left\");\n                if (iframe) iframe.style.pointerEvents = \"none\";\n                ensureClickCatcher(leftViewerRef.current, \"left\", ()=>{\n                    var _leftCurrentIndexRef_current;\n                    return (_leftCurrentIndexRef_current = leftCurrentIndexRef.current) !== null && _leftCurrentIndexRef_current !== void 0 ? _leftCurrentIndexRef_current : section.index;\n                });\n                const doc = (iframe === null || iframe === void 0 ? void 0 : iframe.contentDocument) || (iframe === null || iframe === void 0 ? void 0 : (_iframe_contentWindow = iframe.contentWindow) === null || _iframe_contentWindow === void 0 ? void 0 : _iframe_contentWindow.document);\n                if (doc) attachClickHandlersToDoc(doc, ()=>{\n                    var _leftCurrentIndexRef_current;\n                    return (_leftCurrentIndexRef_current = leftCurrentIndexRef.current) !== null && _leftCurrentIndexRef_current !== void 0 ? _leftCurrentIndexRef_current : section.index;\n                });\n            });\n        }\n        if (dualMode && rightViewerRef.current && !rightRenditionRef.current) {\n            rightRenditionRef.current = rightBookRef.current.renderTo(rightViewerRef.current, options);\n            rightRenditionRef.current.themes.register(\"override\", {\n                \"@page\": {\n                    margin: \"0 !important\"\n                },\n                \"html, body\": {\n                    margin: \"0 !important\",\n                    padding: \"0 !important\",\n                    height: \"100% !important\",\n                    minWidth: \"0 !important\"\n                },\n                \"*\": {\n                    boxSizing: \"border-box !important\"\n                },\n                \"img, svg, canvas, video\": {\n                    width: \"100% !important\",\n                    height: \"100% !important\",\n                    maxWidth: \"100% !important\",\n                    maxHeight: \"100% !important\",\n                    objectFit: \"contain !important\",\n                    display: \"block !important\",\n                    margin: \"0 !important\",\n                    padding: \"0 !important\",\n                    border: \"0 !important\",\n                    borderRadius: \"0 !important\"\n                },\n                \"figure, .page, section, article, div\": {\n                    margin: \"0 !important\",\n                    padding: \"0 !important\",\n                    border: \"0 !important\",\n                    borderRadius: \"0 !important\",\n                    minWidth: \"0 !important\"\n                },\n                \".page-text, .textLayer, .layer-text\": {\n                    display: \"none !important\"\n                },\n                body: {\n                    overflow: \"hidden !important\",\n                    WebkitColumnCount: \"initial !important\",\n                    columnCount: \"initial !important\",\n                    WebkitColumnGap: \"0 !important\",\n                    columnGap: \"0 !important\"\n                }\n            });\n            rightRenditionRef.current.themes.select(\"override\");\n            rightRenditionRef.current.on(\"rendered\", (section)=>{\n                var _rightViewerRef_current, _iframe_contentWindow;\n                const iframe = (_rightViewerRef_current = rightViewerRef.current) === null || _rightViewerRef_current === void 0 ? void 0 : _rightViewerRef_current.querySelector(\"iframe\");\n                injectReset(iframe, \"right\");\n                if (iframe) iframe.style.pointerEvents = \"none\";\n                ensureClickCatcher(rightViewerRef.current, \"right\", ()=>{\n                    var _rightCurrentIndexRef_current;\n                    let idx = (_rightCurrentIndexRef_current = rightCurrentIndexRef.current) !== null && _rightCurrentIndexRef_current !== void 0 ? _rightCurrentIndexRef_current : section.index;\n                    if (!Number.isFinite(idx) && leftCurrentIndexRef.current != null) idx = leftCurrentIndexRef.current + 1;\n                    return idx;\n                });\n                const doc = (iframe === null || iframe === void 0 ? void 0 : iframe.contentDocument) || (iframe === null || iframe === void 0 ? void 0 : (_iframe_contentWindow = iframe.contentWindow) === null || _iframe_contentWindow === void 0 ? void 0 : _iframe_contentWindow.document);\n                if (doc) attachClickHandlersToDoc(doc, ()=>{\n                    var _rightCurrentIndexRef_current;\n                    let idx = (_rightCurrentIndexRef_current = rightCurrentIndexRef.current) !== null && _rightCurrentIndexRef_current !== void 0 ? _rightCurrentIndexRef_current : section.index;\n                    if (!Number.isFinite(idx) && leftCurrentIndexRef.current != null) idx = leftCurrentIndexRef.current + 1;\n                    return idx;\n                });\n            });\n        } else if ((!dualMode || !rightViewerRef.current) && rightRenditionRef.current) {\n            try {\n                rightRenditionRef.current.destroy();\n            } catch (e) {}\n            rightRenditionRef.current = null;\n        }\n        const tasks = [];\n        if (leftHref && leftRenditionRef.current) tasks.push(leftRenditionRef.current.display(leftHref));\n        if (rightHref && rightRenditionRef.current) tasks.push(rightRenditionRef.current.display(rightHref));\n        if (!rightHref && dualMode && rightViewerRef.current) {\n            ensureClickCatcher(rightViewerRef.current, \"right\", ()=>null);\n        }\n        ensureClickCatcher(leftViewerRef.current, \"left\", ()=>{\n            var _leftCurrentIndexRef_current;\n            return (_leftCurrentIndexRef_current = leftCurrentIndexRef.current) !== null && _leftCurrentIndexRef_current !== void 0 ? _leftCurrentIndexRef_current : leftIndex;\n        });\n        if (rightHref && dualMode && rightViewerRef.current) {\n            ensureClickCatcher(rightViewerRef.current, \"right\", ()=>{\n                var _rightCurrentIndexRef_current, _ref;\n                const ri = (_ref = (_rightCurrentIndexRef_current = rightCurrentIndexRef.current) !== null && _rightCurrentIndexRef_current !== void 0 ? _rightCurrentIndexRef_current : leftCurrentIndexRef.current + 1) !== null && _ref !== void 0 ? _ref : leftIndex + 1;\n                return ri;\n            });\n        }\n        Promise.all(tasks).catch(()=>{});\n        setCurrentPage(leftIndex);\n    };\n    const playCurrentPageAudio = (index)=>{\n        const manifestData = manifestRef.current;\n        if (!(manifestData === null || manifestData === void 0 ? void 0 : manifestData.pages)) return;\n        var _manifestData_pages_find;\n        let page = (_manifestData_pages_find = manifestData.pages.find((p)=>p.pageNumber === index + 1)) !== null && _manifestData_pages_find !== void 0 ? _manifestData_pages_find : manifestData.pages[index];\n        if (!(page === null || page === void 0 ? void 0 : page.audioUrl)) {\n            for (const cand of [\n                index - 1,\n                index + 1\n            ]){\n                if (cand < 0) continue;\n                var _manifestData_pages_find1;\n                const alt = (_manifestData_pages_find1 = manifestData.pages.find((p)=>p.pageNumber === cand + 1)) !== null && _manifestData_pages_find1 !== void 0 ? _manifestData_pages_find1 : manifestData.pages[cand];\n                if (alt === null || alt === void 0 ? void 0 : alt.audioUrl) {\n                    page = alt;\n                    break;\n                }\n            }\n        }\n        if ((page === null || page === void 0 ? void 0 : page.audioUrl) && audioRef.current) {\n            audioRef.current.src = page.audioUrl;\n            audioRef.current.load();\n            audioRef.current.play().catch(()=>{});\n        }\n    };\n    const goToPrevPage = ()=>{\n        if (dualMode) {\n            if (currentPage <= 1) {\n                loadPage(0);\n                return;\n            }\n            const candidate = currentPage - 2;\n            loadPage(candidate < 1 ? 1 : candidate);\n        } else {\n            loadPage(Math.max(currentPage - 1, 0));\n        }\n    };\n    const goToNextPage = ()=>{\n        if (!leftBookRef.current) return;\n        const spine = leftBookRef.current.spine;\n        var _spine_items, _ref;\n        const items = (_ref = (_spine_items = spine === null || spine === void 0 ? void 0 : spine.items) !== null && _spine_items !== void 0 ? _spine_items : spine === null || spine === void 0 ? void 0 : spine.spineItems) !== null && _ref !== void 0 ? _ref : [];\n        const total = Array.isArray(items) ? items.length : 0;\n        if (dualMode) {\n            if (currentPage === 0) {\n                loadPage(total > 1 ? 1 : 0);\n                return;\n            }\n            const candidate = currentPage + 2;\n            loadPage(candidate >= total ? Math.max(total - 2, 1) : candidate);\n        } else {\n            loadPage(Math.min(currentPage + 1, Math.max(total - 1, 0)));\n        }\n    };\n    const handleLeftPanelClick = ()=>{\n        var _leftCurrentIndexRef_current;\n        const idx = (_leftCurrentIndexRef_current = leftCurrentIndexRef.current) !== null && _leftCurrentIndexRef_current !== void 0 ? _leftCurrentIndexRef_current : currentPage;\n        if (Number.isFinite(idx)) playCurrentPageAudio(idx);\n    };\n    const handleRightPanelClick = ()=>{\n        var _rightCurrentIndexRef_current, _ref;\n        let idx = (_ref = (_rightCurrentIndexRef_current = rightCurrentIndexRef.current) !== null && _rightCurrentIndexRef_current !== void 0 ? _rightCurrentIndexRef_current : leftCurrentIndexRef.current + 1) !== null && _ref !== void 0 ? _ref : currentPage + 1;\n        if (Number.isFinite(idx)) playCurrentPageAudio(idx);\n    };\n    const startQuiz = ()=>{\n        console.log(\"[startQuiz] 클릭됨\");\n        setShowQuiz(true);\n        setUserAnswers({});\n        setQuizSubmitted(false);\n    // 이미 생성된 문제가 있으면 그대로 표시, 없으면 로딩 상태 유지\n    };\n    const handleAnswerSelect = (qIndex, optionIndex)=>{\n        if (quizSubmitted) return;\n        setUserAnswers((prev)=>({\n                ...prev,\n                [qIndex]: optionIndex\n            }));\n    };\n    const submitQuiz = ()=>{\n        setQuizSubmitted(true);\n    };\n    const closeQuiz = ()=>{\n        setShowQuiz(false);\n        setQuestions([]);\n        setUserAnswers({});\n        setQuizSubmitted(false);\n    };\n    const correctCount = questions.filter((q, i)=>userAnswers[i] === q.correctIndex).length;\n    const totalCount = questions.length;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            fontFamily: \"Arial, sans-serif\",\n            display: \"grid\",\n            gridTemplateRows: \"auto 1fr auto\",\n            height: \"100vh\",\n            position: \"relative\"\n        },\n        children: [\n            quizLoading && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: \"fixed\",\n                    top: 0,\n                    left: 0,\n                    right: 0,\n                    bottom: 0,\n                    background: \"rgba(0,0,0,0.9)\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"center\",\n                    zIndex: 20000\n                },\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    style: {\n                        color: \"white\",\n                        fontSize: \"18px\"\n                    },\n                    children: \"준비 중이에요. 잠시만 기다려 주세요!\"\n                }, void 0, false, {\n                    fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                    lineNumber: 467,\n                    columnNumber: 11\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                lineNumber: 456,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    padding: \"8px 16px\",\n                    background: \"black\",\n                    color: \"white\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"space-between\",\n                    gap: \"16px\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        style: {\n                            display: \"flex\",\n                            alignItems: \"center\",\n                            gap: \"16px\"\n                        },\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                src: \"/logo.png\",\n                                alt: \"Logo\",\n                                style: {\n                                    height: \"40px\"\n                                }\n                            }, void 0, false, {\n                                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                lineNumber: 472,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                style: {\n                                    margin: 0,\n                                    fontSize: \"18px\",\n                                    color: \"white\"\n                                },\n                                children: \"Kid's English\"\n                            }, void 0, false, {\n                                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                lineNumber: 473,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                        lineNumber: 471,\n                        columnNumber: 9\n                    }, this),\n                    manifest && !showQuiz && questions.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: startQuiz,\n                        style: {\n                            padding: \"8px 20px\",\n                            background: \"#4a90d9\",\n                            color: \"white\",\n                            border: \"none\",\n                            borderRadius: \"8px\",\n                            cursor: \"pointer\",\n                            fontSize: \"15px\",\n                            fontWeight: \"bold\"\n                        },\n                        children: \"\\uD83D\\uDCDD 문제 풀기\"\n                    }, void 0, false, {\n                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                        lineNumber: 476,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                lineNumber: 470,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: spreadContainerRef,\n                style: {\n                    display: \"grid\",\n                    gridTemplateColumns: dualMode ? \"1fr 1fr\" : \"1fr\",\n                    gap: 0,\n                    alignItems: \"center\",\n                    justifyItems: \"center\",\n                    width: \"100%\",\n                    height: \"100%\",\n                    background: \"#E8E8E8\",\n                    overflow: \"hidden\",\n                    position: \"relative\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: leftViewerRef,\n                        onClick: handleLeftPanelClick,\n                        style: {\n                            width: \"100%\",\n                            height: \"100%\",\n                            overflow: \"hidden\",\n                            display: \"flex\",\n                            alignItems: \"center\",\n                            justifyContent: \"flex-end\",\n                            cursor: \"pointer\"\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                        lineNumber: 509,\n                        columnNumber: 9\n                    }, this),\n                    dualMode && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        ref: rightViewerRef,\n                        onClick: handleRightPanelClick,\n                        style: {\n                            width: \"100%\",\n                            height: \"100%\",\n                            overflow: \"hidden\",\n                            display: \"flex\",\n                            alignItems: \"center\",\n                            justifyContent: \"flex-start\",\n                            cursor: \"pointer\"\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                        lineNumber: 515,\n                        columnNumber: 11\n                    }, this),\n                    showQuiz && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        style: {\n                            position: \"absolute\",\n                            top: 0,\n                            left: 0,\n                            right: 0,\n                            bottom: 0,\n                            background: \"rgba(0,0,0,0.9)\",\n                            display: \"flex\",\n                            flexDirection: \"column\",\n                            alignItems: \"center\",\n                            justifyContent: \"flex-start\",\n                            zIndex: 10000,\n                            padding: \"24px\",\n                            overflowY: \"auto\",\n                            WebkitOverflowScrolling: \"touch\"\n                        },\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            style: {\n                                maxWidth: \"600px\",\n                                width: \"100%\",\n                                background: \"#1a1a1a\",\n                                borderRadius: \"12px\",\n                                padding: \"24px\",\n                                color: \"#fff\",\n                                marginBottom: \"24px\",\n                                flexShrink: 0\n                            },\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    style: {\n                                        display: \"flex\",\n                                        justifyContent: \"space-between\",\n                                        alignItems: \"center\",\n                                        marginBottom: \"20px\"\n                                    },\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                            style: {\n                                                margin: 0,\n                                                fontSize: \"22px\"\n                                            },\n                                            children: \"\\uD83D\\uDCDA 문제 풀기\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                            lineNumber: 540,\n                                            columnNumber: 17\n                                        }, this),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: closeQuiz,\n                                            style: {\n                                                background: \"#333\",\n                                                color: \"#fff\",\n                                                border: \"none\",\n                                                padding: \"8px 16px\",\n                                                borderRadius: \"8px\",\n                                                cursor: \"pointer\",\n                                                fontSize: \"14px\"\n                                            },\n                                            children: \"닫기\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                            lineNumber: 541,\n                                            columnNumber: 17\n                                        }, this)\n                                    ]\n                                }, void 0, true, {\n                                    fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                    lineNumber: 539,\n                                    columnNumber: 15\n                                }, this),\n                                quizLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    style: {\n                                        textAlign: \"center\",\n                                        padding: \"40px\"\n                                    },\n                                    children: \"준비 중이에요. 잠시만 기다려 주세요!\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                    lineNumber: 550,\n                                    columnNumber: 17\n                                }, this) : questions.length === 0 ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                    style: {\n                                        textAlign: \"center\",\n                                        padding: \"40px\"\n                                    },\n                                    children: \"문제를 불러올 수 없었어요. 다시 시도해 주세요.\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                    lineNumber: 552,\n                                    columnNumber: 17\n                                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                                    children: [\n                                        questions.map((q, qi)=>{\n                                            var _q_options;\n                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                style: {\n                                                    marginBottom: \"24px\",\n                                                    paddingBottom: \"24px\",\n                                                    borderBottom: qi < questions.length - 1 ? \"1px solid #444\" : \"none\"\n                                                },\n                                                children: [\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        style: {\n                                                            marginBottom: \"12px\",\n                                                            fontSize: \"16px\",\n                                                            lineHeight: 1.5\n                                                        },\n                                                        children: [\n                                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"strong\", {\n                                                                children: [\n                                                                    qi + 1,\n                                                                    \".\"\n                                                                ]\n                                                            }, void 0, true, {\n                                                                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                                                lineNumber: 558,\n                                                                columnNumber: 25\n                                                            }, this),\n                                                            \" \",\n                                                            q.question\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                                        lineNumber: 557,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                                        style: {\n                                                            display: \"flex\",\n                                                            flexDirection: \"column\",\n                                                            gap: \"8px\"\n                                                        },\n                                                        children: ((_q_options = q.options) !== null && _q_options !== void 0 ? _q_options : []).map((opt, oi)=>{\n                                                            const isSelected = userAnswers[qi] === oi;\n                                                            const isCorrect = q.correctIndex === oi;\n                                                            const showResult = quizSubmitted;\n                                                            let bg = \"#2a2a2a\";\n                                                            if (showResult) {\n                                                                if (isCorrect) bg = \"#1a4d1a\";\n                                                                else if (isSelected && !isCorrect) bg = \"#4d1a1a\";\n                                                            } else if (isSelected) bg = \"#3a3a5a\";\n                                                            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                                                onClick: ()=>handleAnswerSelect(qi, oi),\n                                                                disabled: quizSubmitted,\n                                                                style: {\n                                                                    padding: \"12px 16px\",\n                                                                    background: bg,\n                                                                    color: \"#fff\",\n                                                                    border: \"1px solid #555\",\n                                                                    borderRadius: \"8px\",\n                                                                    cursor: quizSubmitted ? \"default\" : \"pointer\",\n                                                                    textAlign: \"left\",\n                                                                    fontSize: \"15px\"\n                                                                },\n                                                                children: [\n                                                                    [\n                                                                        \"A\",\n                                                                        \"B\",\n                                                                        \"C\",\n                                                                        \"D\"\n                                                                    ][oi],\n                                                                    \". \",\n                                                                    opt\n                                                                ]\n                                                            }, oi, true, {\n                                                                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                                                lineNumber: 571,\n                                                                columnNumber: 29\n                                                            }, this);\n                                                        })\n                                                    }, void 0, false, {\n                                                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                                        lineNumber: 560,\n                                                        columnNumber: 23\n                                                    }, this),\n                                                    quizSubmitted && q.explanation && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                        style: {\n                                                            marginTop: \"12px\",\n                                                            fontSize: \"14px\",\n                                                            color: \"#aaa\"\n                                                        },\n                                                        children: [\n                                                            \"\\uD83D\\uDCA1 \",\n                                                            q.explanation\n                                                        ]\n                                                    }, void 0, true, {\n                                                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                                        lineNumber: 592,\n                                                        columnNumber: 25\n                                                    }, this)\n                                                ]\n                                            }, qi, true, {\n                                                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                                lineNumber: 556,\n                                                columnNumber: 21\n                                            }, this);\n                                        }),\n                                        !quizSubmitted ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                            onClick: submitQuiz,\n                                            style: {\n                                                width: \"100%\",\n                                                padding: \"14px\",\n                                                background: \"#4a90d9\",\n                                                color: \"#fff\",\n                                                border: \"none\",\n                                                borderRadius: \"8px\",\n                                                cursor: \"pointer\",\n                                                fontSize: \"16px\",\n                                                fontWeight: \"bold\"\n                                            },\n                                            children: \"제출하기\"\n                                        }, void 0, false, {\n                                            fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                            lineNumber: 597,\n                                            columnNumber: 21\n                                        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                            style: {\n                                                textAlign: \"center\",\n                                                padding: \"20px\",\n                                                fontSize: \"18px\",\n                                                fontWeight: \"bold\",\n                                                color: \"#4ade80\"\n                                            },\n                                            children: [\n                                                \"\\uD83C\\uDF89 \",\n                                                correctCount,\n                                                \" / \",\n                                                totalCount,\n                                                \" 정답!\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                            lineNumber: 614,\n                                            columnNumber: 21\n                                        }, this)\n                                    ]\n                                }, void 0, true)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                            lineNumber: 538,\n                            columnNumber: 13\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                        lineNumber: 523,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                lineNumber: 494,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    padding: \"4px\",\n                    background: \"black\",\n                    borderTop: \"2px solid #ddd\",\n                    display: \"flex\",\n                    justifyContent: \"center\",\n                    alignItems: \"center\",\n                    gap: \"16px\"\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: goToPrevPage,\n                        disabled: currentPage === 0,\n                        style: {\n                            padding: \"4px\",\n                            fontSize: \"16px\",\n                            cursor: \"pointer\",\n                            background: \"transparent\",\n                            color: \"white\",\n                            border: \"none\",\n                            borderRadius: \"5px\"\n                        },\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            fill: \"none\",\n                            viewBox: \"0 0 24 24\",\n                            strokeWidth: 1.5,\n                            stroke: \"currentColor\",\n                            width: \"24\",\n                            height: \"24\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                strokeLinecap: \"round\",\n                                strokeLinejoin: \"round\",\n                                d: \"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18\"\n                            }, void 0, false, {\n                                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                lineNumber: 632,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                            lineNumber: 631,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                        lineNumber: 626,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        style: {\n                            color: \"white\",\n                            fontSize: \"16px\"\n                        },\n                        children: [\n                            currentPage + 1,\n                            \" / \",\n                            totalPages || \"?\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                        lineNumber: 635,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                        ref: audioRef,\n                        controls: true,\n                        style: {\n                            display: \"none\"\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                        lineNumber: 638,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: goToNextPage,\n                        disabled: totalPages > 0 && currentPage >= totalPages - 1,\n                        style: {\n                            padding: \"4px\",\n                            fontSize: \"16px\",\n                            cursor: \"pointer\",\n                            background: \"transparent\",\n                            color: \"white\",\n                            border: \"none\",\n                            borderRadius: \"5px\"\n                        },\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n                            xmlns: \"http://www.w3.org/2000/svg\",\n                            fill: \"none\",\n                            viewBox: \"0 0 24 24\",\n                            strokeWidth: 1.5,\n                            stroke: \"currentColor\",\n                            width: \"24\",\n                            height: \"24\",\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                                strokeLinecap: \"round\",\n                                strokeLinejoin: \"round\",\n                                d: \"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3\"\n                            }, void 0, false, {\n                                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                                lineNumber: 645,\n                                columnNumber: 13\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                            lineNumber: 644,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                        lineNumber: 639,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n                lineNumber: 625,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/tom/Desktop/project/epub_viewer/components/EpubViewerWithQuiz.js\",\n        lineNumber: 454,\n        columnNumber: 5\n    }, this);\n}\n_s(EpubViewerWithQuiz, \"4jXI5LBNCuWv/m6btBP4BTDAA2c=\");\n_c = EpubViewerWithQuiz;\nvar _c;\n$RefreshReg$(_c, \"EpubViewerWithQuiz\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvRXB1YlZpZXdlcldpdGhRdWl6LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUUyRDtBQUU1QyxTQUFTSTtRQTZCSEM7O0lBNUJuQixNQUFNQyxxQkFBcUJKLDZDQUFNQSxDQUFDO0lBQ2xDLE1BQU1LLGdCQUFnQkwsNkNBQU1BLENBQUM7SUFDN0IsTUFBTU0saUJBQWlCTiw2Q0FBTUEsQ0FBQztJQUM5QixNQUFNTyxXQUFXUCw2Q0FBTUEsQ0FBQztJQUN4QixNQUFNUSxjQUFjUiw2Q0FBTUEsQ0FBQztJQUMzQixNQUFNUyxlQUFlVCw2Q0FBTUEsQ0FBQztJQUM1QixNQUFNVSxtQkFBbUJWLDZDQUFNQSxDQUFDO0lBQ2hDLE1BQU1XLG9CQUFvQlgsNkNBQU1BLENBQUM7SUFDakMsTUFBTVksc0JBQXNCWiw2Q0FBTUEsQ0FBQztJQUNuQyxNQUFNYSx1QkFBdUJiLDZDQUFNQSxDQUFDO0lBRXBDLE1BQU0sQ0FBQ0csVUFBVVcsWUFBWSxHQUFHYiwrQ0FBUUEsQ0FBQztJQUN6QyxNQUFNLENBQUNjLGFBQWFDLGVBQWUsR0FBR2YsK0NBQVFBLENBQUM7SUFDL0MsTUFBTSxDQUFDZ0IsVUFBVUMsWUFBWSxHQUFHakIsK0NBQVFBLENBQUM7SUFDekMsTUFBTSxDQUFDa0IsVUFBVUMsWUFBWSxHQUFHbkIsK0NBQVFBLENBQUM7SUFDekMsTUFBTSxDQUFDb0IsYUFBYUMsZUFBZSxHQUFHckIsK0NBQVFBLENBQUM7SUFDL0MsTUFBTSxDQUFDc0IsV0FBV0MsYUFBYSxHQUFHdkIsK0NBQVFBLENBQUMsRUFBRTtJQUM3QyxNQUFNLENBQUN3QixhQUFhQyxlQUFlLEdBQUd6QiwrQ0FBUUEsQ0FBQyxDQUFDO0lBQ2hELE1BQU0sQ0FBQzBCLGVBQWVDLGlCQUFpQixHQUFHM0IsK0NBQVFBLENBQUM7SUFFbkQsTUFBTTRCLGNBQWM3Qiw2Q0FBTUEsQ0FBQztJQUMzQkQsZ0RBQVNBO3dDQUFDO1lBQ1I4QixZQUFZQyxPQUFP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QyxnQkFBZTtnQ0FBUUMsR0FBRTs7Ozs7Ozs7Ozs7Ozs7OztrQ0FHekQsOERBQUM5TTt3QkFBRW9CLE9BQU87NEJBQUU4SSxPQUFPOzRCQUFTQyxVQUFVO3dCQUFPOzs0QkFDMUNoTixjQUFjOzRCQUFFOzRCQUFJbUIsY0FBYzs7Ozs7OztrQ0FFckMsOERBQUN5Tzt3QkFBTXBDLEtBQUtoTzt3QkFBVXFRLFFBQVE7d0JBQUM1TCxPQUFPOzRCQUFFSSxTQUFTO3dCQUFPOzs7Ozs7a0NBQ3hELDhEQUFDK0k7d0JBQ0NDLFNBQVNqQzt3QkFDVDBELFVBQVUzTixhQUFhLEtBQUtuQixlQUFlbUIsYUFBYTt3QkFDeEQ4QyxPQUFPOzRCQUFFcUYsU0FBUzs0QkFBTzBELFVBQVU7NEJBQVFNLFFBQVE7NEJBQVdYLFlBQVk7NEJBQWVJLE9BQU87NEJBQVMzSSxRQUFROzRCQUFRd0YsY0FBYzt3QkFBTTtrQ0FFN0ksNEVBQUNzRjs0QkFBSUMsT0FBTTs0QkFBNkJDLE1BQUs7NEJBQU9DLFNBQVE7NEJBQVlDLGFBQWE7NEJBQUtDLFFBQU87NEJBQWVyTCxPQUFNOzRCQUFLQyxRQUFPO3NDQUNoSSw0RUFBQ3FMO2dDQUFLQyxlQUFjO2dDQUFRQyxnQkFBZTtnQ0FBUUMsR0FBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1qRTtHQXRvQndCeFE7S0FBQUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy90b20vRGVza3RvcC9wcm9qZWN0L2VwdWJfdmlld2VyL2NvbXBvbmVudHMvRXB1YlZpZXdlcldpdGhRdWl6LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEVwdWJWaWV3ZXJXaXRoUXVpeigpIHtcbiAgY29uc3Qgc3ByZWFkQ29udGFpbmVyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBsZWZ0Vmlld2VyUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCByaWdodFZpZXdlclJlZiA9IHVzZVJlZihudWxsKTtcbiAgY29uc3QgYXVkaW9SZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGxlZnRCb29rUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCByaWdodEJvb2tSZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IGxlZnRSZW5kaXRpb25SZWYgPSB1c2VSZWYobnVsbCk7XG4gIGNvbnN0IHJpZ2h0UmVuZGl0aW9uUmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCBsZWZ0Q3VycmVudEluZGV4UmVmID0gdXNlUmVmKG51bGwpO1xuICBjb25zdCByaWdodEN1cnJlbnRJbmRleFJlZiA9IHVzZVJlZihudWxsKTtcblxuICBjb25zdCBbbWFuaWZlc3QsIHNldE1hbmlmZXN0XSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbY3VycmVudFBhZ2UsIHNldEN1cnJlbnRQYWdlXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbZHVhbE1vZGUsIHNldER1YWxNb2RlXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbc2hvd1F1aXosIHNldFNob3dRdWl6XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3F1aXpMb2FkaW5nLCBzZXRRdWl6TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW3F1ZXN0aW9ucywgc2V0UXVlc3Rpb25zXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW3VzZXJBbnN3ZXJzLCBzZXRVc2VyQW5zd2Vyc10gPSB1c2VTdGF0ZSh7fSk7XG4gIGNvbnN0IFtxdWl6U3VibWl0dGVkLCBzZXRRdWl6U3VibWl0dGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBtYW5pZmVzdFJlZiA9IHVzZVJlZihudWxsKTtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBtYW5pZmVzdFJlZi5jdXJyZW50ID0gbWFuaWZlc3Q7XG4gIH0sIFttYW5pZmVzdF0pO1xuXG4gIGNvbnN0IGxvYWRQYWdlUmVmID0gdXNlUmVmKCgpID0+IHt9KTtcbiAgbG9hZFBhZ2VSZWYuY3VycmVudCA9IChpZHgpID0+IGxvYWRQYWdlKGlkeCk7XG5cbiAgY29uc3QgdG90YWxQYWdlcyA9IG1hbmlmZXN0Py5wYWdlcz8ubGVuZ3RoID8/IDA7XG4gIGNvbnN0IGlzTGFzdFBhZ2UgPSB0b3RhbFBhZ2VzID4gMCAmJiBjdXJyZW50UGFnZSA+PSB0b3RhbFBhZ2VzIC0gMTtcblxuICAvLyDrp4jsmrTtirgg7IucIOuhnOq3uFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiW0VwdWJWaWV3ZXJdIOy7tO2PrOuEjO2KuCDrp4jsmrTtirjrkKhcIik7XG4gICAgcmV0dXJuICgpID0+IGNvbnNvbGUubG9nKFwiW0VwdWJWaWV3ZXJdIOy7tO2PrOuEjO2KuCDslrjrp4jsmrTtirjrkKhcIik7XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgY29uc3Qgb3BmVXJsID1cbiAgICAgIFwiaHR0cHM6Ly9maWxlcy1raWRzLWVuZ2xpc2guczMuYXAtbm9ydGhlYXN0LTIuYW1hem9uYXdzLmNvbS9ib29rcy91cm4lM0F1dWlkJTNBcHVibGlzaGluZy0zZTFkMjdkZi9lcHViL09FQlBTL2NvbnRlbnQub3BmXCI7XG4gICAgY29uc3QgbWFuaWZlc3RVcmwgPVxuICAgICAgXCJodHRwczovL2ZpbGVzLWtpZHMtZW5nbGlzaC5zMy5hcC1ub3J0aGVhc3QtMi5hbWF6b25hd3MuY29tL2Jvb2tzL3VybiUzQXV1aWQlM0FwdWJsaXNoaW5nLTNlMWQyN2RmL21hbmlmZXN0Lmpzb25cIjtcblxuICAgIGNvbnN0IGluaXQgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBbbWFuaWZlc3RSZXMsIGVQdWJNb2R1bGVdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICBmZXRjaChtYW5pZmVzdFVybCkudGhlbigocikgPT4gci5qc29uKCkpLFxuICAgICAgICBpbXBvcnQoXCJlcHVianNcIikudGhlbigobSkgPT4gbS5kZWZhdWx0KSxcbiAgICAgIF0pO1xuICAgICAgY29uc29sZS5sb2coXCJbRXB1YlZpZXdlcl0gbWFuaWZlc3Qg66Gc65Oc65CoLCBwYWdlczpcIiwgbWFuaWZlc3RSZXM/LnBhZ2VzPy5sZW5ndGgpO1xuICAgICAgc2V0TWFuaWZlc3QobWFuaWZlc3RSZXMpO1xuICAgICAgY29uc3QgZVB1YiA9IGVQdWJNb2R1bGU7XG4gICAgICBjb25zdCBsZWZ0Qm9vayA9IGVQdWIob3BmVXJsKTtcbiAgICAgIGNvbnN0IHJpZ2h0Qm9vayA9IGVQdWIob3BmVXJsKTtcbiAgICAgIGxlZnRCb29rUmVmLmN1cnJlbnQgPSBsZWZ0Qm9vaztcbiAgICAgIHJpZ2h0Qm9va1JlZi5jdXJyZW50ID0gcmlnaHRCb29rO1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW2xlZnRCb29rLnJlYWR5LCByaWdodEJvb2sucmVhZHldKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gbG9hZFBhZ2VSZWYuY3VycmVudCgwKSwgMCk7XG4gICAgfTtcbiAgICBpbml0KCk7XG4gIH0sIFtdKTtcblxuICAvLyDssYUg66Gc65OcIO2bhCDsponsi5wg66y47KCcIOyDneyEsSDsi5zsnpFcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIW1hbmlmZXN0Py5wYWdlcz8ubGVuZ3RoKSByZXR1cm47XG4gICAgY29uc3QgYm9va1RleHQgPSBtYW5pZmVzdC5wYWdlc1xuICAgICAgLm1hcCgocCkgPT4gKHR5cGVvZiBwPy50ZXh0ID09PSBcInN0cmluZ1wiID8gcC50ZXh0LnRyaW0oKSA6IFwiXCIpKVxuICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgLmpvaW4oXCJcXG5cXG5cIilcbiAgICAgIC50cmltKCk7XG4gICAgaWYgKCFib29rVGV4dCkge1xuICAgICAgY29uc29sZS53YXJuKFwiW0VwdWJWaWV3ZXJdIG1hbmlmZXN07JeQIO2FjeyKpO2KuCDsl4bsnYxcIik7XG4gICAgICBzZXRRdWl6TG9hZGluZyhmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiW0VwdWJWaWV3ZXJdIOyxhSDroZzrk5wg7JmE66OMLCDrrLjsoJwg7IOd7ISxIOyLnOyekSwgdGV4dCDquLjsnbQ6XCIsIGJvb2tUZXh0Lmxlbmd0aCk7XG4gICAgZmV0Y2goXCIvYXBpL2dlbmVyYXRlLXF1ZXN0aW9uc1wiLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBib29rVGV4dCB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGlmIChkYXRhLnF1ZXN0aW9ucz8ubGVuZ3RoKSB7XG4gICAgICAgICAgc2V0UXVlc3Rpb25zKGRhdGEucXVlc3Rpb25zKTtcbiAgICAgICAgICBzZXRRdWl6TG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJbRXB1YlZpZXdlcl0g66y47KCcIOyDneyEsSDsmYTro4w6XCIsIGRhdGEucXVlc3Rpb25zLmxlbmd0aCwgXCLqsJxcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIltFcHViVmlld2VyXSDrrLjsoJwg7IOd7ISxIOyLpO2MqDpcIiwgZGF0YS5lcnJvciA/PyBkYXRhKTtcbiAgICAgICAgICBzZXRRdWl6TG9hZGluZyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiW0VwdWJWaWV3ZXJdIOusuOygnCDsg53shLEg7Jik66WYOlwiLCBlcnIpO1xuICAgICAgICBzZXRRdWl6TG9hZGluZyhmYWxzZSk7XG4gICAgICB9KTtcbiAgfSwgW21hbmlmZXN0XSk7XG5cbiAgY29uc3QgaW5qZWN0UmVzZXQgPSAoaWZyYW1lLCBzaWRlKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghaWZyYW1lKSByZXR1cm47XG4gICAgICBpZnJhbWUuc3R5bGUud2lkdGggPSBcIjEwMCVcIjtcbiAgICAgIGlmcmFtZS5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcbiAgICAgIGlmcmFtZS5zdHlsZS5ib3JkZXIgPSBcIjBcIjtcbiAgICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgY29uc3QgZG9jID0gaWZyYW1lLmNvbnRlbnREb2N1bWVudCB8fCBpZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudDtcbiAgICAgIGNvbnN0IHN0eWxlID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgIGNvbnN0IGp1c3RpZnkgPSBzaWRlID09PSBcImxlZnRcIiA/IFwiZmxleC1lbmRcIiA6IFwiZmxleC1zdGFydFwiO1xuICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBgXG4gICAgICAgIEBwYWdle21hcmdpbjowICFpbXBvcnRhbnQ7fVxuICAgICAgICBodG1sLGJvZHksOnJvb3R7bWFyZ2luOjAgIWltcG9ydGFudDtwYWRkaW5nOjAgIWltcG9ydGFudDtoZWlnaHQ6MTAwJSAhaW1wb3J0YW50O21pbi13aWR0aDowICFpbXBvcnRhbnQ7YmFja2dyb3VuZDp0cmFuc3BhcmVudCAhaW1wb3J0YW50fVxuICAgICAgICAqe2JveC1zaXppbmc6Ym9yZGVyLWJveCAhaW1wb3J0YW50O21hcmdpbjowICFpbXBvcnRhbnQ7cGFkZGluZzowICFpbXBvcnRhbnQ7Ym9yZGVyOjAgIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjAgIWltcG9ydGFudDtwb2ludGVyLWV2ZW50czphdXRvICFpbXBvcnRhbnR9XG4gICAgICAgIGJvZHl7ZGlzcGxheTpmbGV4ICFpbXBvcnRhbnQ7YWxpZ24taXRlbXM6Y2VudGVyICFpbXBvcnRhbnQ7anVzdGlmeS1jb250ZW50OiR7anVzdGlmeX0gIWltcG9ydGFudDstd2Via2l0LWNvbHVtbi1jb3VudDppbml0aWFsICFpbXBvcnRhbnQ7Y29sdW1uLWNvdW50OmluaXRpYWwgIWltcG9ydGFudDstd2Via2l0LWNvbHVtbi1nYXA6MCAhaW1wb3J0YW50O2NvbHVtbi1nYXA6MCAhaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbiAhaW1wb3J0YW50fVxuICAgICAgICBib2R5ID4gKnttYXJnaW46MCAhaW1wb3J0YW50O3BhZGRpbmc6MCAhaW1wb3J0YW50O2JvcmRlcjowICFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czowICFpbXBvcnRhbnR9XG4gICAgICAgIHAsZmlndXJlLHNlY3Rpb24sYXJ0aWNsZSxkaXZ7bWFyZ2luOjAgIWltcG9ydGFudDtwYWRkaW5nOjAgIWltcG9ydGFudDtib3JkZXI6MCAhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MCAhaW1wb3J0YW50fVxuICAgICAgICBpbWcsc3ZnLGNhbnZhcyx2aWRlb3ttYXgtd2lkdGg6MTAwJSAhaW1wb3J0YW50O2hlaWdodDphdXRvICFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayAhaW1wb3J0YW50O21hcmdpbjowICFpbXBvcnRhbnQ7cGFkZGluZzowICFpbXBvcnRhbnQ7Ym9yZGVyOjAgIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjAgIWltcG9ydGFudH1cbiAgICAgICAgZmlndXJlLC5wYWdlLHNlY3Rpb24sYXJ0aWNsZSxkaXZ7bWFyZ2luOjAgIWltcG9ydGFudDtwYWRkaW5nOjAgIWltcG9ydGFudDtib3JkZXI6MCAhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6MCAhaW1wb3J0YW50O21pbi13aWR0aDowICFpbXBvcnRhbnR9XG4gICAgICAgIC5wYWdlLXRleHQsLnRleHRMYXllciwubGF5ZXItdGV4dHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudH1cbiAgICAgICAgYXtwb2ludGVyLWV2ZW50czphdXRvICFpbXBvcnRhbnR9XG4gICAgICBgO1xuICAgICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgICAgaWYgKCFkb2MucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwidmlld3BvcnRcIl0nKSkge1xuICAgICAgICBjb25zdCBtZXRhID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJtZXRhXCIpO1xuICAgICAgICBtZXRhLm5hbWUgPSBcInZpZXdwb3J0XCI7XG4gICAgICAgIG1ldGEuY29udGVudCA9IFwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEsIG1heGltdW0tc2NhbGU9MSwgdXNlci1zY2FsYWJsZT1ub1wiO1xuICAgICAgICBkb2MuaGVhZC5hcHBlbmRDaGlsZChtZXRhKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChkb2MuZG9jdW1lbnRFbGVtZW50Py5zdHlsZSkge1xuICAgICAgICAgIGRvYy5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJtYXJnaW5cIiwgXCIwXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgIGRvYy5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJwYWRkaW5nXCIsIFwiMFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9jLmJvZHk/LnN0eWxlKSB7XG4gICAgICAgICAgZG9jLmJvZHkuc3R5bGUuc2V0UHJvcGVydHkoXCJtYXJnaW5cIiwgXCIwXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgIGRvYy5ib2R5LnN0eWxlLnNldFByb3BlcnR5KFwicGFkZGluZ1wiLCBcIjBcIiwgXCJpbXBvcnRhbnRcIik7XG4gICAgICAgICAgZG9jLmJvZHkuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwiZmxleFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICBkb2MuYm9keS5zdHlsZS5zZXRQcm9wZXJ0eShcImFsaWduLWl0ZW1zXCIsIFwiY2VudGVyXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgIGRvYy5ib2R5LnN0eWxlLnNldFByb3BlcnR5KFwianVzdGlmeS1jb250ZW50XCIsIGp1c3RpZnksIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2MuYm9keSkge1xuICAgICAgICAgIEFycmF5LmZyb20oZG9jLmJvZHkuY2hpbGRyZW4pLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICBpZiAoZWw/LnN0eWxlKSB7XG4gICAgICAgICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KFwibWFyZ2luXCIsIFwiMFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoXCJwYWRkaW5nXCIsIFwiMFwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoXCJib3JkZXJcIiwgXCIwXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eShcImJvcmRlci1yYWRpdXNcIiwgXCIwXCIsIFwiaW1wb3J0YW50XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIHt9XG4gICAgICBkb2MucXVlcnlTZWxlY3RvckFsbChcIi5wYWdlLXRleHQsIC50ZXh0TGF5ZXIsIC5sYXllci10ZXh0XCIpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2gge31cbiAgfTtcblxuICBjb25zdCBlbnN1cmVDbGlja0NhdGNoZXIgPSAoY29udGFpbmVyLCBzaWRlLCBpbmRleFByb3ZpZGVyKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghY29udGFpbmVyKSByZXR1cm47XG4gICAgICBjb250YWluZXIuc3R5bGUucG9zaXRpb24gPSBjb250YWluZXIuc3R5bGUucG9zaXRpb24gfHwgXCJyZWxhdGl2ZVwiO1xuICAgICAgY29uc3QgaWQgPSBzaWRlID09PSBcImxlZnRcIiA/IFwiY2xpY2stY2F0Y2hlci1sZWZ0XCIgOiBcImNsaWNrLWNhdGNoZXItcmlnaHRcIjtcbiAgICAgIGxldCBjYXRjaGVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYCMke2lkfWApO1xuICAgICAgaWYgKCFjYXRjaGVyKSB7XG4gICAgICAgIGNhdGNoZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBjYXRjaGVyLmlkID0gaWQ7XG4gICAgICAgIGNhdGNoZXIuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7ei1pbmRleDo5OTk5O2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7cG9pbnRlci1ldmVudHM6YXV0bztjdXJzb3I6cG9pbnRlclwiO1xuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2F0Y2hlcik7XG4gICAgICB9XG4gICAgICBjYXRjaGVyLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkeCA9IGluZGV4UHJvdmlkZXIoKTtcbiAgICAgICAgaWYgKE51bWJlci5pc0Zpbml0ZShpZHgpKSBwbGF5Q3VycmVudFBhZ2VBdWRpbyhpZHgpO1xuICAgICAgfTtcbiAgICB9IGNhdGNoIHt9XG4gIH07XG5cbiAgY29uc3QgYXR0YWNoQ2xpY2tIYW5kbGVyc1RvRG9jID0gKGRvYywgZ2V0SW5kZXgpID0+IHtcbiAgICB0cnkge1xuICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlkeCA9IGdldEluZGV4KCk7XG4gICAgICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoaWR4KSkgcGxheUN1cnJlbnRQYWdlQXVkaW8oaWR4KTtcbiAgICAgIH0sIHRydWUpO1xuICAgIH0gY2F0Y2gge31cbiAgICB0cnkge1xuICAgICAgaWYgKGRvYy5ib2R5KSB7XG4gICAgICAgIGRvYy5ib2R5Lm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgaWR4ID0gZ2V0SW5kZXgoKTtcbiAgICAgICAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGlkeCkpIHBsYXlDdXJyZW50UGFnZUF1ZGlvKGlkeCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSBjYXRjaCB7fVxuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gc3ByZWFkQ29udGFpbmVyUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFjb250YWluZXIpIHJldHVybjtcbiAgICBjb25zdCBoYW5kbGVSZXNpemUgPSAoKSA9PiB7XG4gICAgICBjb25zdCB3aWR0aCA9IGNvbnRhaW5lci5jbGllbnRXaWR0aCB8fCB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIGNvbnN0IGhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQgfHwgd2luZG93LmlubmVySGVpZ2h0IC0gMTUwO1xuICAgICAgY29uc3QgbmV4dER1YWwgPSB3aWR0aCA+PSA5MDA7XG4gICAgICBzZXREdWFsTW9kZShuZXh0RHVhbCk7XG4gICAgICBjb25zdCBwYW5lbFdpZHRoID0gbmV4dER1YWwgPyBNYXRoLmZsb29yKHdpZHRoIC8gMikgOiB3aWR0aDtcbiAgICAgIHRyeSB7IGxlZnRSZW5kaXRpb25SZWYuY3VycmVudD8ucmVzaXplKHBhbmVsV2lkdGgsIGhlaWdodCk7IH0gY2F0Y2gge31cbiAgICAgIHRyeSB7IHJpZ2h0UmVuZGl0aW9uUmVmLmN1cnJlbnQ/LnJlc2l6ZShwYW5lbFdpZHRoLCBoZWlnaHQpOyB9IGNhdGNoIHt9XG4gICAgfTtcbiAgICBjb25zdCBybyA9IG5ldyBSZXNpemVPYnNlcnZlcigoKSA9PiBoYW5kbGVSZXNpemUoKSk7XG4gICAgcm8ub2JzZXJ2ZShjb250YWluZXIpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XG4gICAgc2V0VGltZW91dChoYW5kbGVSZXNpemUsIDApO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICByby5kaXNjb25uZWN0KCk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBoYW5kbGVSZXNpemUpO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICBjb25zdCBzdG9wQ3VycmVudEF1ZGlvID0gKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoYXVkaW9SZWYuY3VycmVudCkge1xuICAgICAgICBhdWRpb1JlZi5jdXJyZW50LnBhdXNlKCk7XG4gICAgICAgIGF1ZGlvUmVmLmN1cnJlbnQuY3VycmVudFRpbWUgPSAwO1xuICAgICAgfVxuICAgIH0gY2F0Y2gge31cbiAgfTtcblxuICBjb25zdCBsb2FkUGFnZSA9IChpbmRleCkgPT4ge1xuICAgIHN0b3BDdXJyZW50QXVkaW8oKTtcbiAgICBpZiAoIWxlZnRCb29rUmVmLmN1cnJlbnQgfHwgIXJpZ2h0Qm9va1JlZi5jdXJyZW50KSByZXR1cm47XG4gICAgY29uc3Qgc3BpbmUgPSBsZWZ0Qm9va1JlZi5jdXJyZW50LnNwaW5lO1xuICAgIGNvbnN0IGl0ZW1zID0gc3BpbmU/Lml0ZW1zID8/IHNwaW5lPy5zcGluZUl0ZW1zID8/IFtdO1xuICAgIGNvbnN0IHNwaW5lTGVuID0gQXJyYXkuaXNBcnJheShpdGVtcykgPyBpdGVtcy5sZW5ndGggOiAwO1xuICAgIGlmICghc3BpbmVMZW4pIHJldHVybjtcblxuICAgIGlmIChkdWFsTW9kZSAmJiBpbmRleCA9PT0gMCkge1xuICAgICAgY29uc3QgcmlnaHRIcmVmT25seSA9IGl0ZW1zWzBdPy5ocmVmO1xuICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiLCBmbG93OiBcInBhZ2luYXRlZFwiLCBzcHJlYWQ6IFwibm9uZVwiLFxuICAgICAgICBhbGxvd1NjcmlwdGVkQ29udGVudDogdHJ1ZSwgbWluU3ByZWFkV2lkdGg6IDAsXG4gICAgICB9O1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGxlZnRWaWV3ZXJSZWYuY3VycmVudCkgbGVmdFZpZXdlclJlZi5jdXJyZW50LmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGlmIChsZWZ0UmVuZGl0aW9uUmVmLmN1cnJlbnQ/LmRlc3Ryb3kpIHtcbiAgICAgICAgICBsZWZ0UmVuZGl0aW9uUmVmLmN1cnJlbnQuZGVzdHJveSgpO1xuICAgICAgICAgIGxlZnRSZW5kaXRpb25SZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge31cbiAgICAgIGlmIChyaWdodFZpZXdlclJlZi5jdXJyZW50ICYmICFyaWdodFJlbmRpdGlvblJlZi5jdXJyZW50KSB7XG4gICAgICAgIHJpZ2h0UmVuZGl0aW9uUmVmLmN1cnJlbnQgPSByaWdodEJvb2tSZWYuY3VycmVudC5yZW5kZXJUbyhyaWdodFZpZXdlclJlZi5jdXJyZW50LCBvcHRpb25zKTtcbiAgICAgICAgcmlnaHRSZW5kaXRpb25SZWYuY3VycmVudC5vbihcInJlbmRlcmVkXCIsICgpID0+IHtcbiAgICAgICAgICBjb25zdCBpZnJhbWUgPSByaWdodFZpZXdlclJlZi5jdXJyZW50Py5xdWVyeVNlbGVjdG9yKFwiaWZyYW1lXCIpO1xuICAgICAgICAgIGluamVjdFJlc2V0KGlmcmFtZSwgXCJyaWdodFwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAocmlnaHRIcmVmT25seSAmJiByaWdodFJlbmRpdGlvblJlZi5jdXJyZW50KSB7XG4gICAgICAgIHJpZ2h0UmVuZGl0aW9uUmVmLmN1cnJlbnQuZGlzcGxheShyaWdodEhyZWZPbmx5KS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgICB9XG4gICAgICBpZiAocmlnaHRWaWV3ZXJSZWYuY3VycmVudCkgZW5zdXJlQ2xpY2tDYXRjaGVyKHJpZ2h0Vmlld2VyUmVmLmN1cnJlbnQsIFwicmlnaHRcIiwgKCkgPT4gMCk7XG4gICAgICBsZWZ0Q3VycmVudEluZGV4UmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgcmlnaHRDdXJyZW50SW5kZXhSZWYuY3VycmVudCA9IDA7XG4gICAgICBzZXRDdXJyZW50UGFnZSgwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgbGVmdEluZGV4O1xuICAgIGlmIChkdWFsTW9kZSkge1xuICAgICAgbGVmdEluZGV4ID0gaW5kZXggPD0gMCA/IDEgOiAoaW5kZXggJSAyID09PSAxID8gaW5kZXggOiBpbmRleCArIDEpO1xuICAgICAgaWYgKGxlZnRJbmRleCA+PSBzcGluZUxlbikgbGVmdEluZGV4ID0gTWF0aC5tYXgoc3BpbmVMZW4gLSAyLCAwKTtcbiAgICAgIGlmIChsZWZ0SW5kZXggPCAxICYmIHNwaW5lTGVuID4gMSkgbGVmdEluZGV4ID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVmdEluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oaW5kZXgsIHNwaW5lTGVuIC0gMSkpO1xuICAgIH1cblxuICAgIGNvbnN0IGxlZnRIcmVmID0gaXRlbXNbbGVmdEluZGV4XT8uaHJlZjtcbiAgICBsZXQgcmlnaHRIcmVmID0gZHVhbE1vZGUgJiYgbGVmdEluZGV4ICsgMSA8IHNwaW5lTGVuID8gaXRlbXNbbGVmdEluZGV4ICsgMV0/LmhyZWYgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoZHVhbE1vZGUgJiYgbGVmdEluZGV4ID09PSBzcGluZUxlbiAtIDEpIHtcbiAgICAgIHJpZ2h0SHJlZiA9IHVuZGVmaW5lZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChyaWdodFZpZXdlclJlZi5jdXJyZW50KSByaWdodFZpZXdlclJlZi5jdXJyZW50LmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIGlmIChyaWdodFJlbmRpdGlvblJlZi5jdXJyZW50Py5kZXN0cm95KSB7XG4gICAgICAgICAgcmlnaHRSZW5kaXRpb25SZWYuY3VycmVudC5kZXN0cm95KCk7XG4gICAgICAgICAgcmlnaHRSZW5kaXRpb25SZWYuY3VycmVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2gge31cbiAgICB9XG5cbiAgICBsZWZ0Q3VycmVudEluZGV4UmVmLmN1cnJlbnQgPSBsZWZ0SW5kZXg7XG4gICAgcmlnaHRDdXJyZW50SW5kZXhSZWYuY3VycmVudCA9IHJpZ2h0SHJlZiA/IGxlZnRJbmRleCArIDEgOiBudWxsO1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIHdpZHRoOiBcIjEwMCVcIiwgaGVpZ2h0OiBcIjEwMCVcIiwgZmxvdzogXCJwYWdpbmF0ZWRcIiwgc3ByZWFkOiBcIm5vbmVcIixcbiAgICAgIGFsbG93U2NyaXB0ZWRDb250ZW50OiB0cnVlLCBtaW5TcHJlYWRXaWR0aDogMCxcbiAgICB9O1xuXG4gICAgaWYgKCFsZWZ0UmVuZGl0aW9uUmVmLmN1cnJlbnQgJiYgbGVmdFZpZXdlclJlZi5jdXJyZW50KSB7XG4gICAgICBsZWZ0UmVuZGl0aW9uUmVmLmN1cnJlbnQgPSBsZWZ0Qm9va1JlZi5jdXJyZW50LnJlbmRlclRvKGxlZnRWaWV3ZXJSZWYuY3VycmVudCwgb3B0aW9ucyk7XG4gICAgICBsZWZ0UmVuZGl0aW9uUmVmLmN1cnJlbnQudGhlbWVzLnJlZ2lzdGVyKFwib3ZlcnJpZGVcIiwge1xuICAgICAgICBcIkBwYWdlXCI6IHsgbWFyZ2luOiBcIjAgIWltcG9ydGFudFwiIH0sXG4gICAgICAgIFwiaHRtbCwgYm9keVwiOiB7IG1hcmdpbjogXCIwICFpbXBvcnRhbnRcIiwgcGFkZGluZzogXCIwICFpbXBvcnRhbnRcIiwgaGVpZ2h0OiBcIjEwMCUgIWltcG9ydGFudFwiLCBtaW5XaWR0aDogXCIwICFpbXBvcnRhbnRcIiB9LFxuICAgICAgICBcIipcIjogeyBib3hTaXppbmc6IFwiYm9yZGVyLWJveCAhaW1wb3J0YW50XCIgfSxcbiAgICAgICAgXCJpbWcsIHN2ZywgY2FudmFzLCB2aWRlb1wiOiB7IHdpZHRoOiBcIjEwMCUgIWltcG9ydGFudFwiLCBoZWlnaHQ6IFwiMTAwJSAhaW1wb3J0YW50XCIsIG1heFdpZHRoOiBcIjEwMCUgIWltcG9ydGFudFwiLCBtYXhIZWlnaHQ6IFwiMTAwJSAhaW1wb3J0YW50XCIsIG9iamVjdEZpdDogXCJjb250YWluICFpbXBvcnRhbnRcIiwgZGlzcGxheTogXCJibG9jayAhaW1wb3J0YW50XCIsIG1hcmdpbjogXCIwICFpbXBvcnRhbnRcIiwgcGFkZGluZzogXCIwICFpbXBvcnRhbnRcIiwgYm9yZGVyOiBcIjAgIWltcG9ydGFudFwiLCBib3JkZXJSYWRpdXM6IFwiMCAhaW1wb3J0YW50XCIgfSxcbiAgICAgICAgXCJmaWd1cmUsIC5wYWdlLCBzZWN0aW9uLCBhcnRpY2xlLCBkaXZcIjogeyBtYXJnaW46IFwiMCAhaW1wb3J0YW50XCIsIHBhZGRpbmc6IFwiMCAhaW1wb3J0YW50XCIsIGJvcmRlcjogXCIwICFpbXBvcnRhbnRcIiwgYm9yZGVyUmFkaXVzOiBcIjAgIWltcG9ydGFudFwiLCBtaW5XaWR0aDogXCIwICFpbXBvcnRhbnRcIiB9LFxuICAgICAgICBcIi5wYWdlLXRleHQsIC50ZXh0TGF5ZXIsIC5sYXllci10ZXh0XCI6IHsgZGlzcGxheTogXCJub25lICFpbXBvcnRhbnRcIiB9LFxuICAgICAgICBib2R5OiB7IG92ZXJmbG93OiBcImhpZGRlbiAhaW1wb3J0YW50XCIsIFdlYmtpdENvbHVtbkNvdW50OiBcImluaXRpYWwgIWltcG9ydGFudFwiLCBjb2x1bW5Db3VudDogXCJpbml0aWFsICFpbXBvcnRhbnRcIiwgV2Via2l0Q29sdW1uR2FwOiBcIjAgIWltcG9ydGFudFwiLCBjb2x1bW5HYXA6IFwiMCAhaW1wb3J0YW50XCIgfSxcbiAgICAgIH0pO1xuICAgICAgbGVmdFJlbmRpdGlvblJlZi5jdXJyZW50LnRoZW1lcy5zZWxlY3QoXCJvdmVycmlkZVwiKTtcbiAgICAgIGxlZnRSZW5kaXRpb25SZWYuY3VycmVudC5vbihcInJlbmRlcmVkXCIsIChzZWN0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGxlZnRWaWV3ZXJSZWYuY3VycmVudD8ucXVlcnlTZWxlY3RvcihcImlmcmFtZVwiKTtcbiAgICAgICAgaW5qZWN0UmVzZXQoaWZyYW1lLCBcImxlZnRcIik7XG4gICAgICAgIGlmIChpZnJhbWUpIGlmcmFtZS5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgICAgIGVuc3VyZUNsaWNrQ2F0Y2hlcihsZWZ0Vmlld2VyUmVmLmN1cnJlbnQsIFwibGVmdFwiLCAoKSA9PiBsZWZ0Q3VycmVudEluZGV4UmVmLmN1cnJlbnQgPz8gc2VjdGlvbi5pbmRleCk7XG4gICAgICAgIGNvbnN0IGRvYyA9IGlmcmFtZT8uY29udGVudERvY3VtZW50IHx8IGlmcmFtZT8uY29udGVudFdpbmRvdz8uZG9jdW1lbnQ7XG4gICAgICAgIGlmIChkb2MpIGF0dGFjaENsaWNrSGFuZGxlcnNUb0RvYyhkb2MsICgpID0+IGxlZnRDdXJyZW50SW5kZXhSZWYuY3VycmVudCA/PyBzZWN0aW9uLmluZGV4KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChkdWFsTW9kZSAmJiByaWdodFZpZXdlclJlZi5jdXJyZW50ICYmICFyaWdodFJlbmRpdGlvblJlZi5jdXJyZW50KSB7XG4gICAgICByaWdodFJlbmRpdGlvblJlZi5jdXJyZW50ID0gcmlnaHRCb29rUmVmLmN1cnJlbnQucmVuZGVyVG8ocmlnaHRWaWV3ZXJSZWYuY3VycmVudCwgb3B0aW9ucyk7XG4gICAgICByaWdodFJlbmRpdGlvblJlZi5jdXJyZW50LnRoZW1lcy5yZWdpc3RlcihcIm92ZXJyaWRlXCIsIHtcbiAgICAgICAgXCJAcGFnZVwiOiB7IG1hcmdpbjogXCIwICFpbXBvcnRhbnRcIiB9LFxuICAgICAgICBcImh0bWwsIGJvZHlcIjogeyBtYXJnaW46IFwiMCAhaW1wb3J0YW50XCIsIHBhZGRpbmc6IFwiMCAhaW1wb3J0YW50XCIsIGhlaWdodDogXCIxMDAlICFpbXBvcnRhbnRcIiwgbWluV2lkdGg6IFwiMCAhaW1wb3J0YW50XCIgfSxcbiAgICAgICAgXCIqXCI6IHsgYm94U2l6aW5nOiBcImJvcmRlci1ib3ggIWltcG9ydGFudFwiIH0sXG4gICAgICAgIFwiaW1nLCBzdmcsIGNhbnZhcywgdmlkZW9cIjogeyB3aWR0aDogXCIxMDAlICFpbXBvcnRhbnRcIiwgaGVpZ2h0OiBcIjEwMCUgIWltcG9ydGFudFwiLCBtYXhXaWR0aDogXCIxMDAlICFpbXBvcnRhbnRcIiwgbWF4SGVpZ2h0OiBcIjEwMCUgIWltcG9ydGFudFwiLCBvYmplY3RGaXQ6IFwiY29udGFpbiAhaW1wb3J0YW50XCIsIGRpc3BsYXk6IFwiYmxvY2sgIWltcG9ydGFudFwiLCBtYXJnaW46IFwiMCAhaW1wb3J0YW50XCIsIHBhZGRpbmc6IFwiMCAhaW1wb3J0YW50XCIsIGJvcmRlcjogXCIwICFpbXBvcnRhbnRcIiwgYm9yZGVyUmFkaXVzOiBcIjAgIWltcG9ydGFudFwiIH0sXG4gICAgICAgIFwiZmlndXJlLCAucGFnZSwgc2VjdGlvbiwgYXJ0aWNsZSwgZGl2XCI6IHsgbWFyZ2luOiBcIjAgIWltcG9ydGFudFwiLCBwYWRkaW5nOiBcIjAgIWltcG9ydGFudFwiLCBib3JkZXI6IFwiMCAhaW1wb3J0YW50XCIsIGJvcmRlclJhZGl1czogXCIwICFpbXBvcnRhbnRcIiwgbWluV2lkdGg6IFwiMCAhaW1wb3J0YW50XCIgfSxcbiAgICAgICAgXCIucGFnZS10ZXh0LCAudGV4dExheWVyLCAubGF5ZXItdGV4dFwiOiB7IGRpc3BsYXk6IFwibm9uZSAhaW1wb3J0YW50XCIgfSxcbiAgICAgICAgYm9keTogeyBvdmVyZmxvdzogXCJoaWRkZW4gIWltcG9ydGFudFwiLCBXZWJraXRDb2x1bW5Db3VudDogXCJpbml0aWFsICFpbXBvcnRhbnRcIiwgY29sdW1uQ291bnQ6IFwiaW5pdGlhbCAhaW1wb3J0YW50XCIsIFdlYmtpdENvbHVtbkdhcDogXCIwICFpbXBvcnRhbnRcIiwgY29sdW1uR2FwOiBcIjAgIWltcG9ydGFudFwiIH0sXG4gICAgICB9KTtcbiAgICAgIHJpZ2h0UmVuZGl0aW9uUmVmLmN1cnJlbnQudGhlbWVzLnNlbGVjdChcIm92ZXJyaWRlXCIpO1xuICAgICAgcmlnaHRSZW5kaXRpb25SZWYuY3VycmVudC5vbihcInJlbmRlcmVkXCIsIChzZWN0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IHJpZ2h0Vmlld2VyUmVmLmN1cnJlbnQ/LnF1ZXJ5U2VsZWN0b3IoXCJpZnJhbWVcIik7XG4gICAgICAgIGluamVjdFJlc2V0KGlmcmFtZSwgXCJyaWdodFwiKTtcbiAgICAgICAgaWYgKGlmcmFtZSkgaWZyYW1lLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgICAgICAgZW5zdXJlQ2xpY2tDYXRjaGVyKHJpZ2h0Vmlld2VyUmVmLmN1cnJlbnQsIFwicmlnaHRcIiwgKCkgPT4ge1xuICAgICAgICAgIGxldCBpZHggPSByaWdodEN1cnJlbnRJbmRleFJlZi5jdXJyZW50ID8/IHNlY3Rpb24uaW5kZXg7XG4gICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaWR4KSAmJiBsZWZ0Q3VycmVudEluZGV4UmVmLmN1cnJlbnQgIT0gbnVsbCkgaWR4ID0gbGVmdEN1cnJlbnRJbmRleFJlZi5jdXJyZW50ICsgMTtcbiAgICAgICAgICByZXR1cm4gaWR4O1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZG9jID0gaWZyYW1lPy5jb250ZW50RG9jdW1lbnQgfHwgaWZyYW1lPy5jb250ZW50V2luZG93Py5kb2N1bWVudDtcbiAgICAgICAgaWYgKGRvYykgYXR0YWNoQ2xpY2tIYW5kbGVyc1RvRG9jKGRvYywgKCkgPT4ge1xuICAgICAgICAgIGxldCBpZHggPSByaWdodEN1cnJlbnRJbmRleFJlZi5jdXJyZW50ID8/IHNlY3Rpb24uaW5kZXg7XG4gICAgICAgICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaWR4KSAmJiBsZWZ0Q3VycmVudEluZGV4UmVmLmN1cnJlbnQgIT0gbnVsbCkgaWR4ID0gbGVmdEN1cnJlbnRJbmRleFJlZi5jdXJyZW50ICsgMTtcbiAgICAgICAgICByZXR1cm4gaWR4O1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoKCFkdWFsTW9kZSB8fCAhcmlnaHRWaWV3ZXJSZWYuY3VycmVudCkgJiYgcmlnaHRSZW5kaXRpb25SZWYuY3VycmVudCkge1xuICAgICAgdHJ5IHsgcmlnaHRSZW5kaXRpb25SZWYuY3VycmVudC5kZXN0cm95KCk7IH0gY2F0Y2gge31cbiAgICAgIHJpZ2h0UmVuZGl0aW9uUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHRhc2tzID0gW107XG4gICAgaWYgKGxlZnRIcmVmICYmIGxlZnRSZW5kaXRpb25SZWYuY3VycmVudCkgdGFza3MucHVzaChsZWZ0UmVuZGl0aW9uUmVmLmN1cnJlbnQuZGlzcGxheShsZWZ0SHJlZikpO1xuICAgIGlmIChyaWdodEhyZWYgJiYgcmlnaHRSZW5kaXRpb25SZWYuY3VycmVudCkgdGFza3MucHVzaChyaWdodFJlbmRpdGlvblJlZi5jdXJyZW50LmRpc3BsYXkocmlnaHRIcmVmKSk7XG4gICAgaWYgKCFyaWdodEhyZWYgJiYgZHVhbE1vZGUgJiYgcmlnaHRWaWV3ZXJSZWYuY3VycmVudCkge1xuICAgICAgZW5zdXJlQ2xpY2tDYXRjaGVyKHJpZ2h0Vmlld2VyUmVmLmN1cnJlbnQsIFwicmlnaHRcIiwgKCkgPT4gbnVsbCk7XG4gICAgfVxuICAgIGVuc3VyZUNsaWNrQ2F0Y2hlcihsZWZ0Vmlld2VyUmVmLmN1cnJlbnQsIFwibGVmdFwiLCAoKSA9PiBsZWZ0Q3VycmVudEluZGV4UmVmLmN1cnJlbnQgPz8gbGVmdEluZGV4KTtcbiAgICBpZiAocmlnaHRIcmVmICYmIGR1YWxNb2RlICYmIHJpZ2h0Vmlld2VyUmVmLmN1cnJlbnQpIHtcbiAgICAgIGVuc3VyZUNsaWNrQ2F0Y2hlcihyaWdodFZpZXdlclJlZi5jdXJyZW50LCBcInJpZ2h0XCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgcmkgPSByaWdodEN1cnJlbnRJbmRleFJlZi5jdXJyZW50ID8/IGxlZnRDdXJyZW50SW5kZXhSZWYuY3VycmVudCArIDEgPz8gbGVmdEluZGV4ICsgMTtcbiAgICAgICAgcmV0dXJuIHJpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIFByb21pc2UuYWxsKHRhc2tzKS5jYXRjaCgoKSA9PiB7fSk7XG5cbiAgICBzZXRDdXJyZW50UGFnZShsZWZ0SW5kZXgpO1xuICB9O1xuXG4gIGNvbnN0IHBsYXlDdXJyZW50UGFnZUF1ZGlvID0gKGluZGV4KSA9PiB7XG4gICAgY29uc3QgbWFuaWZlc3REYXRhID0gbWFuaWZlc3RSZWYuY3VycmVudDtcbiAgICBpZiAoIW1hbmlmZXN0RGF0YT8ucGFnZXMpIHJldHVybjtcbiAgICBsZXQgcGFnZSA9IG1hbmlmZXN0RGF0YS5wYWdlcy5maW5kKChwKSA9PiBwLnBhZ2VOdW1iZXIgPT09IGluZGV4ICsgMSkgPz8gbWFuaWZlc3REYXRhLnBhZ2VzW2luZGV4XTtcbiAgICBpZiAoIXBhZ2U/LmF1ZGlvVXJsKSB7XG4gICAgICBmb3IgKGNvbnN0IGNhbmQgb2YgW2luZGV4IC0gMSwgaW5kZXggKyAxXSkge1xuICAgICAgICBpZiAoY2FuZCA8IDApIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBhbHQgPSBtYW5pZmVzdERhdGEucGFnZXMuZmluZCgocCkgPT4gcC5wYWdlTnVtYmVyID09PSBjYW5kICsgMSkgPz8gbWFuaWZlc3REYXRhLnBhZ2VzW2NhbmRdO1xuICAgICAgICBpZiAoYWx0Py5hdWRpb1VybCkgeyBwYWdlID0gYWx0OyBicmVhazsgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocGFnZT8uYXVkaW9VcmwgJiYgYXVkaW9SZWYuY3VycmVudCkge1xuICAgICAgYXVkaW9SZWYuY3VycmVudC5zcmMgPSBwYWdlLmF1ZGlvVXJsO1xuICAgICAgYXVkaW9SZWYuY3VycmVudC5sb2FkKCk7XG4gICAgICBhdWRpb1JlZi5jdXJyZW50LnBsYXkoKS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdvVG9QcmV2UGFnZSA9ICgpID0+IHtcbiAgICBpZiAoZHVhbE1vZGUpIHtcbiAgICAgIGlmIChjdXJyZW50UGFnZSA8PSAxKSB7IGxvYWRQYWdlKDApOyByZXR1cm47IH1cbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGN1cnJlbnRQYWdlIC0gMjtcbiAgICAgIGxvYWRQYWdlKGNhbmRpZGF0ZSA8IDEgPyAxIDogY2FuZGlkYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9hZFBhZ2UoTWF0aC5tYXgoY3VycmVudFBhZ2UgLSAxLCAwKSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGdvVG9OZXh0UGFnZSA9ICgpID0+IHtcbiAgICBpZiAoIWxlZnRCb29rUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBjb25zdCBzcGluZSA9IGxlZnRCb29rUmVmLmN1cnJlbnQuc3BpbmU7XG4gICAgY29uc3QgaXRlbXMgPSBzcGluZT8uaXRlbXMgPz8gc3BpbmU/LnNwaW5lSXRlbXMgPz8gW107XG4gICAgY29uc3QgdG90YWwgPSBBcnJheS5pc0FycmF5KGl0ZW1zKSA/IGl0ZW1zLmxlbmd0aCA6IDA7XG4gICAgaWYgKGR1YWxNb2RlKSB7XG4gICAgICBpZiAoY3VycmVudFBhZ2UgPT09IDApIHtcbiAgICAgICAgbG9hZFBhZ2UodG90YWwgPiAxID8gMSA6IDApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBjdXJyZW50UGFnZSArIDI7XG4gICAgICBsb2FkUGFnZShjYW5kaWRhdGUgPj0gdG90YWwgPyBNYXRoLm1heCh0b3RhbCAtIDIsIDEpIDogY2FuZGlkYXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9hZFBhZ2UoTWF0aC5taW4oY3VycmVudFBhZ2UgKyAxLCBNYXRoLm1heCh0b3RhbCAtIDEsIDApKSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUxlZnRQYW5lbENsaWNrID0gKCkgPT4ge1xuICAgIGNvbnN0IGlkeCA9IGxlZnRDdXJyZW50SW5kZXhSZWYuY3VycmVudCA/PyBjdXJyZW50UGFnZTtcbiAgICBpZiAoTnVtYmVyLmlzRmluaXRlKGlkeCkpIHBsYXlDdXJyZW50UGFnZUF1ZGlvKGlkeCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUmlnaHRQYW5lbENsaWNrID0gKCkgPT4ge1xuICAgIGxldCBpZHggPSByaWdodEN1cnJlbnRJbmRleFJlZi5jdXJyZW50ID8/IGxlZnRDdXJyZW50SW5kZXhSZWYuY3VycmVudCArIDEgPz8gY3VycmVudFBhZ2UgKyAxO1xuICAgIGlmIChOdW1iZXIuaXNGaW5pdGUoaWR4KSkgcGxheUN1cnJlbnRQYWdlQXVkaW8oaWR4KTtcbiAgfTtcblxuICBjb25zdCBzdGFydFF1aXogPSAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJbc3RhcnRRdWl6XSDtgbTrpq3rkKhcIik7XG4gICAgc2V0U2hvd1F1aXoodHJ1ZSk7XG4gICAgc2V0VXNlckFuc3dlcnMoe30pO1xuICAgIHNldFF1aXpTdWJtaXR0ZWQoZmFsc2UpO1xuICAgIC8vIOydtOuvuCDsg53shLHrkJwg66y47KCc6rCAIOyeiOycvOuptCDqt7jrjIDroZwg7ZGc7IucLCDsl4bsnLzrqbQg66Gc65SpIOyDge2DnCDsnKDsp4BcbiAgfTtcblxuICBjb25zdCBoYW5kbGVBbnN3ZXJTZWxlY3QgPSAocUluZGV4LCBvcHRpb25JbmRleCkgPT4ge1xuICAgIGlmIChxdWl6U3VibWl0dGVkKSByZXR1cm47XG4gICAgc2V0VXNlckFuc3dlcnMoKHByZXYpID0+ICh7IC4uLnByZXYsIFtxSW5kZXhdOiBvcHRpb25JbmRleCB9KSk7XG4gIH07XG5cbiAgY29uc3Qgc3VibWl0UXVpeiA9ICgpID0+IHtcbiAgICBzZXRRdWl6U3VibWl0dGVkKHRydWUpO1xuICB9O1xuXG4gIGNvbnN0IGNsb3NlUXVpeiA9ICgpID0+IHtcbiAgICBzZXRTaG93UXVpeihmYWxzZSk7XG4gICAgc2V0UXVlc3Rpb25zKFtdKTtcbiAgICBzZXRVc2VyQW5zd2Vycyh7fSk7XG4gICAgc2V0UXVpelN1Ym1pdHRlZChmYWxzZSk7XG4gIH07XG5cbiAgY29uc3QgY29ycmVjdENvdW50ID0gcXVlc3Rpb25zLmZpbHRlcigocSwgaSkgPT4gdXNlckFuc3dlcnNbaV0gPT09IHEuY29ycmVjdEluZGV4KS5sZW5ndGg7XG4gIGNvbnN0IHRvdGFsQ291bnQgPSBxdWVzdGlvbnMubGVuZ3RoO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17eyBmb250RmFtaWx5OiBcIkFyaWFsLCBzYW5zLXNlcmlmXCIsIGRpc3BsYXk6IFwiZ3JpZFwiLCBncmlkVGVtcGxhdGVSb3dzOiBcImF1dG8gMWZyIGF1dG9cIiwgaGVpZ2h0OiBcIjEwMHZoXCIsIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIgfX0+XG4gICAgICB7cXVpekxvYWRpbmcgJiYgKFxuICAgICAgICA8ZGl2XG4gICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXG4gICAgICAgICAgICB0b3A6IDAsIGxlZnQ6IDAsIHJpZ2h0OiAwLCBib3R0b206IDAsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBcInJnYmEoMCwwLDAsMC45KVwiLFxuICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLFxuICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICB6SW5kZXg6IDIwMDAwLFxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogXCJ3aGl0ZVwiLCBmb250U2l6ZTogXCIxOHB4XCIgfX0+7KSA67mEIOykkeydtOyXkOyalC4g7J6g7Iuc66eMIOq4sOuLpOugpCDso7zshLjsmpQhPC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICA8ZGl2IHN0eWxlPXt7IHBhZGRpbmc6IFwiOHB4IDE2cHhcIiwgYmFja2dyb3VuZDogXCJibGFja1wiLCBjb2xvcjogXCJ3aGl0ZVwiLCBkaXNwbGF5OiBcImZsZXhcIiwgYWxpZ25JdGVtczogXCJjZW50ZXJcIiwganVzdGlmeUNvbnRlbnQ6IFwic3BhY2UtYmV0d2VlblwiLCBnYXA6IFwiMTZweFwiIH19PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6IFwiZmxleFwiLCBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLCBnYXA6IFwiMTZweFwiIH19PlxuICAgICAgICAgIDxpbWcgc3JjPVwiL2xvZ28ucG5nXCIgYWx0PVwiTG9nb1wiIHN0eWxlPXt7IGhlaWdodDogXCI0MHB4XCIgfX0gLz5cbiAgICAgICAgICA8aDEgc3R5bGU9e3sgbWFyZ2luOiAwLCBmb250U2l6ZTogXCIxOHB4XCIsIGNvbG9yOiBcIndoaXRlXCIgfX0+S2lkJmFwb3M7cyBFbmdsaXNoPC9oMT5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIHttYW5pZmVzdCAmJiAhc2hvd1F1aXogJiYgcXVlc3Rpb25zLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgIG9uQ2xpY2s9e3N0YXJ0UXVpen1cbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIHBhZGRpbmc6IFwiOHB4IDIwcHhcIixcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjNGE5MGQ5XCIsXG4gICAgICAgICAgICAgIGNvbG9yOiBcIndoaXRlXCIsXG4gICAgICAgICAgICAgIGJvcmRlcjogXCJub25lXCIsXG4gICAgICAgICAgICAgIGJvcmRlclJhZGl1czogXCI4cHhcIixcbiAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcbiAgICAgICAgICAgICAgZm9udFNpemU6IFwiMTVweFwiLFxuICAgICAgICAgICAgICBmb250V2VpZ2h0OiBcImJvbGRcIixcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAg8J+TnSDrrLjsoJwg7ZKA6riwXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdlxuICAgICAgICByZWY9e3NwcmVhZENvbnRhaW5lclJlZn1cbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBkaXNwbGF5OiBcImdyaWRcIixcbiAgICAgICAgICBncmlkVGVtcGxhdGVDb2x1bW5zOiBkdWFsTW9kZSA/IFwiMWZyIDFmclwiIDogXCIxZnJcIixcbiAgICAgICAgICBnYXA6IDAsXG4gICAgICAgICAgYWxpZ25JdGVtczogXCJjZW50ZXJcIixcbiAgICAgICAgICBqdXN0aWZ5SXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgICAgICAgIGhlaWdodDogXCIxMDAlXCIsXG4gICAgICAgICAgYmFja2dyb3VuZDogXCIjRThFOEU4XCIsXG4gICAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXG4gICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHJlZj17bGVmdFZpZXdlclJlZn1cbiAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVMZWZ0UGFuZWxDbGlja31cbiAgICAgICAgICBzdHlsZT17eyB3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIsIG92ZXJmbG93OiBcImhpZGRlblwiLCBkaXNwbGF5OiBcImZsZXhcIiwgYWxpZ25JdGVtczogXCJjZW50ZXJcIiwganVzdGlmeUNvbnRlbnQ6IFwiZmxleC1lbmRcIiwgY3Vyc29yOiBcInBvaW50ZXJcIiB9fVxuICAgICAgICAvPlxuICAgICAgICB7ZHVhbE1vZGUgJiYgKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIHJlZj17cmlnaHRWaWV3ZXJSZWZ9XG4gICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVSaWdodFBhbmVsQ2xpY2t9XG4gICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogXCIxMDAlXCIsIGhlaWdodDogXCIxMDAlXCIsIG92ZXJmbG93OiBcImhpZGRlblwiLCBkaXNwbGF5OiBcImZsZXhcIiwgYWxpZ25JdGVtczogXCJjZW50ZXJcIiwganVzdGlmeUNvbnRlbnQ6IFwiZmxleC1zdGFydFwiLCBjdXJzb3I6IFwicG9pbnRlclwiIH19XG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cblxuICAgICAgICB7c2hvd1F1aXogJiYgKFxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICAgIHRvcDogMCwgbGVmdDogMCwgcmlnaHQ6IDAsIGJvdHRvbTogMCxcbiAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCJyZ2JhKDAsMCwwLDAuOSlcIixcbiAgICAgICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXG4gICAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246IFwiY29sdW1uXCIsXG4gICAgICAgICAgICAgIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiBcImZsZXgtc3RhcnRcIixcbiAgICAgICAgICAgICAgekluZGV4OiAxMDAwMCxcbiAgICAgICAgICAgICAgcGFkZGluZzogXCIyNHB4XCIsXG4gICAgICAgICAgICAgIG92ZXJmbG93WTogXCJhdXRvXCIsXG4gICAgICAgICAgICAgIFdlYmtpdE92ZXJmbG93U2Nyb2xsaW5nOiBcInRvdWNoXCIsXG4gICAgICAgICAgICB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWF4V2lkdGg6IFwiNjAwcHhcIiwgd2lkdGg6IFwiMTAwJVwiLCBiYWNrZ3JvdW5kOiBcIiMxYTFhMWFcIiwgYm9yZGVyUmFkaXVzOiBcIjEycHhcIiwgcGFkZGluZzogXCIyNHB4XCIsIGNvbG9yOiBcIiNmZmZcIiwgbWFyZ2luQm90dG9tOiBcIjI0cHhcIiwgZmxleFNocmluazogMCB9fT5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiBcImZsZXhcIiwganVzdGlmeUNvbnRlbnQ6IFwic3BhY2UtYmV0d2VlblwiLCBhbGlnbkl0ZW1zOiBcImNlbnRlclwiLCBtYXJnaW5Cb3R0b206IFwiMjBweFwiIH19PlxuICAgICAgICAgICAgICAgIDxoMiBzdHlsZT17eyBtYXJnaW46IDAsIGZvbnRTaXplOiBcIjIycHhcIiB9fT7wn5OaIOusuOygnCDtkoDquLA8L2gyPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2Nsb3NlUXVpen1cbiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGJhY2tncm91bmQ6IFwiIzMzM1wiLCBjb2xvcjogXCIjZmZmXCIsIGJvcmRlcjogXCJub25lXCIsIHBhZGRpbmc6IFwiOHB4IDE2cHhcIiwgYm9yZGVyUmFkaXVzOiBcIjhweFwiLCBjdXJzb3I6IFwicG9pbnRlclwiLCBmb250U2l6ZTogXCIxNHB4XCIgfX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICDri6vquLBcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAge3F1aXpMb2FkaW5nID8gKFxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPXt7IHRleHRBbGlnbjogXCJjZW50ZXJcIiwgcGFkZGluZzogXCI0MHB4XCIgfX0+7KSA67mEIOykkeydtOyXkOyalC4g7J6g7Iuc66eMIOq4sOuLpOugpCDso7zshLjsmpQhPC9wPlxuICAgICAgICAgICAgICApIDogcXVlc3Rpb25zLmxlbmd0aCA9PT0gMCA/IChcbiAgICAgICAgICAgICAgICA8cCBzdHlsZT17eyB0ZXh0QWxpZ246IFwiY2VudGVyXCIsIHBhZGRpbmc6IFwiNDBweFwiIH19PuusuOygnOulvCDrtojrn6zsmKwg7IiYIOyXhuyXiOyWtOyalC4g64uk7IucIOyLnOuPhO2VtCDso7zshLjsmpQuPC9wPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICB7cXVlc3Rpb25zLm1hcCgocSwgcWkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e3FpfSBzdHlsZT17eyBtYXJnaW5Cb3R0b206IFwiMjRweFwiLCBwYWRkaW5nQm90dG9tOiBcIjI0cHhcIiwgYm9yZGVyQm90dG9tOiBxaSA8IHF1ZXN0aW9ucy5sZW5ndGggLSAxID8gXCIxcHggc29saWQgIzQ0NFwiIDogXCJub25lXCIgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiBcIjEycHhcIiwgZm9udFNpemU6IFwiMTZweFwiLCBsaW5lSGVpZ2h0OiAxLjUgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPntxaSArIDF9Ljwvc3Ryb25nPiB7cS5xdWVzdGlvbn1cbiAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiBcImZsZXhcIiwgZmxleERpcmVjdGlvbjogXCJjb2x1bW5cIiwgZ2FwOiBcIjhweFwiIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyhxLm9wdGlvbnMgPz8gW10pLm1hcCgob3B0LCBvaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc1NlbGVjdGVkID0gdXNlckFuc3dlcnNbcWldID09PSBvaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDb3JyZWN0ID0gcS5jb3JyZWN0SW5kZXggPT09IG9pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzaG93UmVzdWx0ID0gcXVpelN1Ym1pdHRlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJnID0gXCIjMmEyYTJhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG93UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ29ycmVjdCkgYmcgPSBcIiMxYTRkMWFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1NlbGVjdGVkICYmICFpc0NvcnJlY3QpIGJnID0gXCIjNGQxYTFhXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNTZWxlY3RlZCkgYmcgPSBcIiMzYTNhNWFcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9e29pfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gaGFuZGxlQW5zd2VyU2VsZWN0KHFpLCBvaSl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlZD17cXVpelN1Ym1pdHRlZH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMTJweCAxNnB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGJnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgIzU1NVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IFwiOHB4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcXVpelN1Ym1pdHRlZCA/IFwiZGVmYXVsdFwiIDogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogXCJsZWZ0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjE1cHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1tcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIl1bb2ldfS4ge29wdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIHtxdWl6U3VibWl0dGVkICYmIHEuZXhwbGFuYXRpb24gJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3sgbWFyZ2luVG9wOiBcIjEycHhcIiwgZm9udFNpemU6IFwiMTRweFwiLCBjb2xvcjogXCIjYWFhXCIgfX0+8J+SoSB7cS5leHBsYW5hdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgIHshcXVpelN1Ym1pdHRlZCA/IChcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3N1Ym1pdFF1aXp9XG4gICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcIjEwMCVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IFwiMTRweFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjNGE5MGQ5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjZmZmXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiBcIjhweFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBcIjE2cHhcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6IFwiYm9sZFwiLFxuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICDsoJzstpztlZjquLBcbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHRleHRBbGlnbjogXCJjZW50ZXJcIiwgcGFkZGluZzogXCIyMHB4XCIsIGZvbnRTaXplOiBcIjE4cHhcIiwgZm9udFdlaWdodDogXCJib2xkXCIsIGNvbG9yOiBcIiM0YWRlODBcIiB9fT5cbiAgICAgICAgICAgICAgICAgICAgICDwn46JIHtjb3JyZWN0Q291bnR9IC8ge3RvdGFsQ291bnR9IOygleuLtSFcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiBcIjRweFwiLCBiYWNrZ3JvdW5kOiBcImJsYWNrXCIsIGJvcmRlclRvcDogXCIycHggc29saWQgI2RkZFwiLCBkaXNwbGF5OiBcImZsZXhcIiwganVzdGlmeUNvbnRlbnQ6IFwiY2VudGVyXCIsIGFsaWduSXRlbXM6IFwiY2VudGVyXCIsIGdhcDogXCIxNnB4XCIgfX0+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXtnb1RvUHJldlBhZ2V9XG4gICAgICAgICAgZGlzYWJsZWQ9e2N1cnJlbnRQYWdlID09PSAwfVxuICAgICAgICAgIHN0eWxlPXt7IHBhZGRpbmc6IFwiNHB4XCIsIGZvbnRTaXplOiBcIjE2cHhcIiwgY3Vyc29yOiBcInBvaW50ZXJcIiwgYmFja2dyb3VuZDogXCJ0cmFuc3BhcmVudFwiLCBjb2xvcjogXCJ3aGl0ZVwiLCBib3JkZXI6IFwibm9uZVwiLCBib3JkZXJSYWRpdXM6IFwiNXB4XCIgfX1cbiAgICAgICAgPlxuICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZVdpZHRoPXsxLjV9IHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiPlxuICAgICAgICAgICAgPHBhdGggc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiIGQ9XCJNMTAuNSAxOS41IDMgMTJtMCAwIDcuNS03LjVNMyAxMmgxOFwiIC8+XG4gICAgICAgICAgPC9zdmc+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8cCBzdHlsZT17eyBjb2xvcjogXCJ3aGl0ZVwiLCBmb250U2l6ZTogXCIxNnB4XCIgfX0+XG4gICAgICAgICAge2N1cnJlbnRQYWdlICsgMX0gLyB7dG90YWxQYWdlcyB8fCBcIj9cIn1cbiAgICAgICAgPC9wPlxuICAgICAgICA8YXVkaW8gcmVmPXthdWRpb1JlZn0gY29udHJvbHMgc3R5bGU9e3sgZGlzcGxheTogXCJub25lXCIgfX0gLz5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e2dvVG9OZXh0UGFnZX1cbiAgICAgICAgICBkaXNhYmxlZD17dG90YWxQYWdlcyA+IDAgJiYgY3VycmVudFBhZ2UgPj0gdG90YWxQYWdlcyAtIDF9XG4gICAgICAgICAgc3R5bGU9e3sgcGFkZGluZzogXCI0cHhcIiwgZm9udFNpemU6IFwiMTZweFwiLCBjdXJzb3I6IFwicG9pbnRlclwiLCBiYWNrZ3JvdW5kOiBcInRyYW5zcGFyZW50XCIsIGNvbG9yOiBcIndoaXRlXCIsIGJvcmRlcjogXCJub25lXCIsIGJvcmRlclJhZGl1czogXCI1cHhcIiB9fVxuICAgICAgICA+XG4gICAgICAgICAgPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cIm5vbmVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlV2lkdGg9ezEuNX0gc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCI+XG4gICAgICAgICAgICA8cGF0aCBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBzdHJva2VMaW5lam9pbj1cInJvdW5kXCIgZD1cIk0xMy41IDQuNSAyMSAxMm0wIDAtNy41IDcuNU0yMSAxMkgzXCIgLz5cbiAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cbiJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiRXB1YlZpZXdlcldpdGhRdWl6IiwibWFuaWZlc3QiLCJzcHJlYWRDb250YWluZXJSZWYiLCJsZWZ0Vmlld2VyUmVmIiwicmlnaHRWaWV3ZXJSZWYiLCJhdWRpb1JlZiIsImxlZnRCb29rUmVmIiwicmlnaHRCb29rUmVmIiwibGVmdFJlbmRpdGlvblJlZiIsInJpZ2h0UmVuZGl0aW9uUmVmIiwibGVmdEN1cnJlbnRJbmRleFJlZiIsInJpZ2h0Q3VycmVudEluZGV4UmVmIiwic2V0TWFuaWZlc3QiLCJjdXJyZW50UGFnZSIsInNldEN1cnJlbnRQYWdlIiwiZHVhbE1vZGUiLCJzZXREdWFsTW9kZSIsInNob3dRdWl6Iiwic2V0U2hvd1F1aXoiLCJxdWl6TG9hZGluZyIsInNldFF1aXpMb2FkaW5nIiwicXVlc3Rpb25zIiwic2V0UXVlc3Rpb25zIiwidXNlckFuc3dlcnMiLCJzZXRVc2VyQW5zd2VycyIsInF1aXpTdWJtaXR0ZWQiLCJzZXRRdWl6U3VibWl0dGVkIiwibWFuaWZlc3RSZWYiLCJjdXJyZW50IiwibG9hZFBhZ2VSZWYiLCJpZHgiLCJsb2FkUGFnZSIsInRvdGFsUGFnZXMiLCJwYWdlcyIsImxlbmd0aCIsImlzTGFzdFBhZ2UiLCJjb25zb2xlIiwibG9nIiwib3BmVXJsIiwibWFuaWZlc3RVcmwiLCJpbml0IiwibWFuaWZlc3RSZXMiLCJlUHViTW9kdWxlIiwiUHJvbWlzZSIsImFsbCIsImZldGNoIiwidGhlbiIsInIiLCJqc29uIiwibSIsImRlZmF1bHQiLCJlUHViIiwibGVmdEJvb2siLCJyaWdodEJvb2siLCJyZWFkeSIsInNldFRpbWVvdXQiLCJib29rVGV4dCIsIm1hcCIsInAiLCJ0ZXh0IiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJqb2luIiwid2FybiIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlcyIsImRhdGEiLCJlcnJvciIsImNhdGNoIiwiZXJyIiwiaW5qZWN0UmVzZXQiLCJpZnJhbWUiLCJzaWRlIiwic3R5bGUiLCJ3aWR0aCIsImhlaWdodCIsImJvcmRlciIsImRpc3BsYXkiLCJkb2MiLCJjb250ZW50RG9jdW1lbnQiLCJjb250ZW50V2luZG93IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwianVzdGlmeSIsInRleHRDb250ZW50IiwiaGVhZCIsImFwcGVuZENoaWxkIiwicXVlcnlTZWxlY3RvciIsIm1ldGEiLCJuYW1lIiwiY29udGVudCIsImRvY3VtZW50RWxlbWVudCIsInNldFByb3BlcnR5IiwiQXJyYXkiLCJmcm9tIiwiY2hpbGRyZW4iLCJmb3JFYWNoIiwiZWwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZW5zdXJlQ2xpY2tDYXRjaGVyIiwiY29udGFpbmVyIiwiaW5kZXhQcm92aWRlciIsInBvc2l0aW9uIiwiaWQiLCJjYXRjaGVyIiwiY3NzVGV4dCIsIm9uY2xpY2siLCJOdW1iZXIiLCJpc0Zpbml0ZSIsInBsYXlDdXJyZW50UGFnZUF1ZGlvIiwiYXR0YWNoQ2xpY2tIYW5kbGVyc1RvRG9jIiwiZ2V0SW5kZXgiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlUmVzaXplIiwiY2xpZW50V2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiY2xpZW50SGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJuZXh0RHVhbCIsInBhbmVsV2lkdGgiLCJNYXRoIiwiZmxvb3IiLCJyZXNpemUiLCJybyIsIlJlc2l6ZU9ic2VydmVyIiwib2JzZXJ2ZSIsImRpc2Nvbm5lY3QiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3RvcEN1cnJlbnRBdWRpbyIsInBhdXNlIiwiY3VycmVudFRpbWUiLCJpbmRleCIsIml0ZW1zIiwic3BpbmUiLCJzcGluZUl0ZW1zIiwic3BpbmVMZW4iLCJpc0FycmF5IiwicmlnaHRIcmVmT25seSIsImhyZWYiLCJvcHRpb25zIiwiZmxvdyIsInNwcmVhZCIsImFsbG93U2NyaXB0ZWRDb250ZW50IiwibWluU3ByZWFkV2lkdGgiLCJpbm5lckhUTUwiLCJkZXN0cm95IiwicmVuZGVyVG8iLCJvbiIsImxlZnRJbmRleCIsIm1heCIsIm1pbiIsImxlZnRIcmVmIiwicmlnaHRIcmVmIiwidW5kZWZpbmVkIiwidGhlbWVzIiwicmVnaXN0ZXIiLCJtYXJnaW4iLCJwYWRkaW5nIiwibWluV2lkdGgiLCJib3hTaXppbmciLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsIm9iamVjdEZpdCIsImJvcmRlclJhZGl1cyIsIm92ZXJmbG93IiwiV2Via2l0Q29sdW1uQ291bnQiLCJjb2x1bW5Db3VudCIsIldlYmtpdENvbHVtbkdhcCIsImNvbHVtbkdhcCIsInNlbGVjdCIsInNlY3Rpb24iLCJwb2ludGVyRXZlbnRzIiwidGFza3MiLCJwdXNoIiwicmkiLCJtYW5pZmVzdERhdGEiLCJwYWdlIiwiZmluZCIsInBhZ2VOdW1iZXIiLCJhdWRpb1VybCIsImNhbmQiLCJhbHQiLCJzcmMiLCJsb2FkIiwicGxheSIsImdvVG9QcmV2UGFnZSIsImNhbmRpZGF0ZSIsImdvVG9OZXh0UGFnZSIsInRvdGFsIiwiaGFuZGxlTGVmdFBhbmVsQ2xpY2siLCJoYW5kbGVSaWdodFBhbmVsQ2xpY2siLCJzdGFydFF1aXoiLCJoYW5kbGVBbnN3ZXJTZWxlY3QiLCJxSW5kZXgiLCJvcHRpb25JbmRleCIsInByZXYiLCJzdWJtaXRRdWl6IiwiY2xvc2VRdWl6IiwiY29ycmVjdENvdW50IiwicSIsImkiLCJjb3JyZWN0SW5kZXgiLCJ0b3RhbENvdW50IiwiZGl2IiwiZm9udEZhbWlseSIsImdyaWRUZW1wbGF0ZVJvd3MiLCJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJib3R0b20iLCJiYWNrZ3JvdW5kIiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwiekluZGV4IiwiY29sb3IiLCJmb250U2l6ZSIsImdhcCIsImltZyIsImgxIiwiYnV0dG9uIiwib25DbGljayIsImN1cnNvciIsImZvbnRXZWlnaHQiLCJyZWYiLCJncmlkVGVtcGxhdGVDb2x1bW5zIiwianVzdGlmeUl0ZW1zIiwiZmxleERpcmVjdGlvbiIsIm92ZXJmbG93WSIsIldlYmtpdE92ZXJmbG93U2Nyb2xsaW5nIiwibWFyZ2luQm90dG9tIiwiZmxleFNocmluayIsImgyIiwidGV4dEFsaWduIiwicWkiLCJwYWRkaW5nQm90dG9tIiwiYm9yZGVyQm90dG9tIiwibGluZUhlaWdodCIsInN0cm9uZyIsInF1ZXN0aW9uIiwib3B0Iiwib2kiLCJpc1NlbGVjdGVkIiwiaXNDb3JyZWN0Iiwic2hvd1Jlc3VsdCIsImJnIiwiZGlzYWJsZWQiLCJleHBsYW5hdGlvbiIsIm1hcmdpblRvcCIsImJvcmRlclRvcCIsInN2ZyIsInhtbG5zIiwiZmlsbCIsInZpZXdCb3giLCJzdHJva2VXaWR0aCIsInN0cm9rZSIsInBhdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJkIiwiYXVkaW8iLCJjb250cm9scyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/EpubViewerWithQuiz.js\n"));

/***/ })

}]);